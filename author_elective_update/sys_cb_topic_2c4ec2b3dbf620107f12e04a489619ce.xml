<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_topic">
    <sys_cb_topic action="DELETE">
        <applicability/>
        <category/>
        <channels/>
        <connect_queue/>
        <description/>
        <flexible_conversation_switching>true</flexible_conversation_switching>
        <graph>{"graph_api_version":"1.0.21","variables":{"1131daa088d44c089a60fded925d24f0":{"id":"1131daa088d44c089a60fded925d24f0","name":"catalog_item_id","label":"Catalog_item_id","defaultValue":"","varType":"string","category":"vaInputs"},"9381e4fde5e7447e9eef151e8e7d8702":{"id":"9381e4fde5e7447e9eef151e8e7d8702","value":{"mode":"script","value":"(function execute() {\n    return gs.getProperty('glide.servlet.uri');\n})()"},"name":"baseUri","label":"baseUri","varType":"script","category":"vaVars"},"745a837e10f043a38efdbf1b08800fd3":{"id":"745a837e10f043a38efdbf1b08800fd3","value":{"mode":"simple","value":""},"name":"itemJSON","label":"itemJSON","varType":"script","category":"vaVars"},"f61bf8223b43462ea94fc7fa7a6fc417":{"id":"f61bf8223b43462ea94fc7fa7a6fc417","value":{"mode":"simple","value":""},"name":"itemName","label":"itemName","varType":"script","category":"vaVars"},"a06d4557c70947488597ad7fe29358f4":{"id":"a06d4557c70947488597ad7fe29358f4","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"record_id","label":"record_id","varType":"script","category":"vaVars"},"c5da60988453406889bfa6c17a636f64":{"id":"c5da60988453406889bfa6c17a636f64","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"record_table","label":"record_table","varType":"script","category":"vaVars"},"829234221c9b4339b5a1d651e52a7eb8":{"id":"829234221c9b4339b5a1d651e52a7eb8","name":"proceed","label":"Proceed","varType":"boolean","category":"vaInputs"},"90aa4f0077db49aaaa0932c0af3d4047":{"id":"90aa4f0077db49aaaa0932c0af3d4047","value":{"mode":"simple","value":"-1"},"name":"qIndex","label":"qIndex","varType":"script","category":"vaVars"},"c841975739a349f5af02d65c45d0be1a":{"id":"c841975739a349f5af02d65c45d0be1a","name":"submit_producer","label":"Submit Producer","varType":"boolean","category":"vaInputs"},"16562d4ce5fe481c87cf88d18cc5c556":{"id":"16562d4ce5fe481c87cf88d18cc5c556","value":{"mode":"simple","value":"5"},"name":"limit","label":"limit","varType":"script","category":"vaVars"},"2cd3c2046b834ec5a7f2549f50def198":{"id":"2cd3c2046b834ec5a7f2549f50def198","value":{"mode":"simple","value":"0"},"name":"count","label":"count","varType":"script","category":"vaVars"},"266dc0c745be4b33a2f6c2c508f8950d":{"id":"266dc0c745be4b33a2f6c2c508f8950d","value":{"mode":"simple","value":"0"},"name":"index","label":"index","varType":"script","category":"vaVars"},"cbf05d46a7bc4e5e88341a9e58ef86d3":{"id":"cbf05d46a7bc4e5e88341a9e58ef86d3","name":"order_item","label":"Order Item","varType":"boolean","category":"vaInputs"},"fd8950c771344da9bc6ecf42176b33bb":{"id":"fd8950c771344da9bc6ecf42176b33bb","name":"question_date","label":"Question Date","varType":"date_time","category":"vaInputs","mode":"date"},"fbacd63e1b574297a9ef974fc4406b4f":{"id":"fbacd63e1b574297a9ef974fc4406b4f","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"validation_message","label":"validation_message","varType":"script","category":"vaVars"},"c2b03d461bc847b698db334b03ec940b":{"id":"c2b03d461bc847b698db334b03ec940b","name":"question_text","label":"Question Text","varType":"string","category":"vaInputs"},"c3c6071998d24b928bb9bab53a862e3e":{"id":"c3c6071998d24b928bb9bab53a862e3e","name":"question_yesno","label":"Question YesNo","varType":"boolean","category":"vaInputs"},"523a290c0b4a41ed8f638a9b861a741d":{"id":"523a290c0b4a41ed8f638a9b861a741d","name":"question_reference","label":"Question Reference","varType":"reference","table":"","category":"vaInputs"},"6c47c81124d04d2d95284677c6b56b4e":{"category":"vaInputs","id":"6c47c81124d04d2d95284677c6b56b4e","label":"User","name":"user","table":"sys_user","varType":"reference"},"a7efd661d041446aad2c824ce5ed7ab2":{"id":"a7efd661d041446aad2c824ce5ed7ab2","value":{"mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       var result;\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    return '';\n})()\n"},"name":"request_for","label":"request_for","varType":"script","category":"vaVars"},"810d44081284448299bc452f7019d477":{"id":"810d44081284448299bc452f7019d477","name":"question_choice","label":"Question Choice","varType":"reference","table":"","category":"vaInputs"},"83be2864c3424394abf59da4c3575f4d":{"id":"83be2864c3424394abf59da4c3575f4d","name":"question_date_time","label":"Question Date Time","varType":"date_time","category":"vaInputs","mode":"date_time"},"5642abe47e9043f8a95ba103193b877f":{"id":"5642abe47e9043f8a95ba103193b877f","name":"proceed_with_default_value","label":"Proceed With Default Value","varType":"boolean","category":"vaInputs"},"508bf7c3b8a44167970c810aac02b47d":{"id":"508bf7c3b8a44167970c810aac02b47d","name":"question_requested_for","label":"Question Requested For","varType":"reference","table":"","category":"vaInputs"},"755b41f21f8049c0be9dd862fdc8ebc8":{"id":"755b41f21f8049c0be9dd862fdc8ebc8","name":"search_requested_for","label":"Search Requested For","varType":"string","category":"vaInputs"},"1c4624affbf042b4b6e1ecbe63a9c9bf":{"id":"1c4624affbf042b4b6e1ecbe63a9c9bf","value":{"mode":"script","value":"(function execute() {\n    return false;\n})()\n"},"name":"canView","label":"canView","varType":"script","category":"vaVars"},"0ce955283111489bb7b64466efc11574":{"id":"0ce955283111489bb7b64466efc11574","name":"request_for_another_user","label":"Request For Another User","varType":"boolean","category":"vaInputs"},"f0d3429c9704497da63a365564131f4f":{"id":"f0d3429c9704497da63a365564131f4f","value":{"mode":"script","value":"(function execute() {\n    return '7,14,15,17,21,23,25,29,30,32';\n})()\n"},"name":"unsupportedVarTypes","label":"unsupportedVarTypes","varType":"script","category":"vaVars"},"7661f33f602448a199628ce1a2e15a32":{"id":"7661f33f602448a199628ce1a2e15a32","name":"question_email","label":"Question Email","varType":"string","category":"vaInputs"},"6a853e56921a495db0759b588a88433f":{"id":"6a853e56921a495db0759b588a88433f","name":"question_ip_address","label":"Question IP Address","varType":"string","category":"vaInputs"},"181880e85d62463d803afef14fe85dae":{"id":"181880e85d62463d803afef14fe85dae","name":"question_url","label":"Question URL","varType":"string","category":"vaInputs"},"9303dd46fd7d4ca5b46b016f634abecb":{"id":"9303dd46fd7d4ca5b46b016f634abecb","name":"add_attachment","label":"Add Attachment","varType":"boolean","category":"vaInputs"},"9c8b83ffa24b4513a6207547bd521c1e":{"id":"9c8b83ffa24b4513a6207547bd521c1e","name":"upload_attachment","label":"Upload Attachment","varType":"file","category":"vaInputs"},"640cdc88172e495dad449ebbb11ec6f2":{"id":"640cdc88172e495dad449ebbb11ec6f2","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"media_links_form_attachment","label":"media_links_form_attachment","varType":"script","category":"vaVars"},"ffb10952df7d4f29adc0b69320e58663":{"id":"ffb10952df7d4f29adc0b69320e58663","name":"add_more","label":"Add More","varType":"boolean","category":"vaInputs"},"9b244cacd5b448ecac220b3dba13a26b":{"id":"9b244cacd5b448ecac220b3dba13a26b","name":"question_attachment","label":"Question Attachment","varType":"file","category":"vaInputs"},"2058f7313a394f1f94eb7d968897d8c0":{"id":"2058f7313a394f1f94eb7d968897d8c0","name":"execute_contextual_search","label":"Execute_contextual_search","defaultValue":"false","varType":"string","category":"vaInputs"},"2f15de717cb448d3ab3237e9e174a452":{"id":"2f15de717cb448d3ab3237e9e174a452","name":"confirm_catalog_item","label":"Confirm_catalog_item","defaultValue":"true","varType":"string","category":"vaInputs"},"412fb15b7fd141e4ba9ec76cb1b2fd19":{"id":"412fb15b7fd141e4ba9ec76cb1b2fd19","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"contextualSearchVariable","label":"contextualSearchVariable","varType":"script","category":"vaVars"},"ceebca1d02c24302b0412d1ffc07a780":{"id":"ceebca1d02c24302b0412d1ffc07a780","value":{"mode":"simple","value":"2821675a5b30130070e4492c11f91a89"},"name":"contextualSearchContext","label":"contextualSearchContext","varType":"script","category":"vaVars"},"5dbe6455279d4270b071deccb9002981":{"id":"5dbe6455279d4270b071deccb9002981","value":{"mode":"simple","value":"3"},"name":"contextualSearchResultLimit","label":"contextualSearchResultLimit","varType":"script","category":"vaVars"},"fa1c0d693b3e42a884a7f1b067ad40d3":{"id":"fa1c0d693b3e42a884a7f1b067ad40d3","value":{"mode":"simple","value":"0"},"name":"contextualSearchIndex","label":"contextualSearchIndex","varType":"script","category":"vaVars"},"69aadfe47f5046438fb0ea6b453f7827":{"id":"69aadfe47f5046438fb0ea6b453f7827","value":{"value":"","mode":"simple"},"name":"contextualSearchResultJsonString","label":"contextualSearchResultJsonString","varType":"script","category":"vaVars"},"be2aae83f28d426cbfc7837b5b16e65a":{"id":"be2aae83f28d426cbfc7837b5b16e65a","value":{"mode":"simple","value":"0"},"name":"contextualSearchResultCount","label":"contextualSearchResultCount","varType":"script","category":"vaVars"},"8c2169ef87774005a60fa8109175cbee":{"id":"8c2169ef87774005a60fa8109175cbee","name":"did_articles_help","label":"Did_articles_help","varType":"boolean","category":"vaInputs"}},"goals":{"primary":{"id":"primary","trigger":{"type":"primary"},"name":"primary","applicability":"","description":"","nodes":{"038fdd71a34340ab81a9913d00551286":{"id":"038fdd71a34340ab81a9913d00551286","stepType":"Start","name":"Start","greetingResponse":{"mode":"simple","value":""},"parameters":[{"name":"catalog_item_id","value":"","id":"1131daa088d44c089a60fded925d24f0","disabled":false,"referenced":true,"checked":true},{"name":"execute_contextual_search","value":"false","id":"2058f7313a394f1f94eb7d968897d8c0","checked":false,"referenced":true,"disabled":false},{"name":"confirm_catalog_item","value":"true","id":"2f15de717cb448d3ab3237e9e174a452","checked":false,"referenced":false,"disabled":false}],"variableIds":["1131daa088d44c089a60fded925d24f0","2058f7313a394f1f94eb7d968897d8c0","2f15de717cb448d3ab3237e9e174a452"]},"6a34e39c5e1845a79efcf76baf10044e":{"id":"6a34e39c5e1845a79efcf76baf10044e","stepType":"TerminateGoal","name":"End","confirmationMessage":{"value":"","mode":"simple"},"outputVariables":[{"key":"record_id","value":"{{vaVars.record_id}}","mode":"simple","disabled":true},{"key":"record_table","value":"{{vaVars.record_table}}","mode":"simple","disabled":true},{"key":"variables","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (!itemJson.variables)\n        return '';\n    var variablesObj = {};\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n    }\n    return JSON.stringify(variablesObj);\n})()\n","mode":"script","disabled":true}]},"ff689f5bfdb3489bafd261f4692681c9":{"id":"ff689f5bfdb3489bafd261f4692681c9","name":"Set Selected Item","script":"(function execute() {\n    var itemId = vaInputs.catalog_item_id.getValue();\n    var itemJSON = new sn_sc.CatalogConversationHelper().getItem(itemId);\n    vaVars.itemJSON = JSON.stringify(itemJSON);\n    vaVars.itemName = itemJSON.name;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"a64d04aea6ab4f07b2d6ce77043bb415":{"id":"a64d04aea6ab4f07b2d6ce77043bb415","stepType":"TextOutput","name":"Item Description","value":{"value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var response = gs.getMessage(\"Here are some more details about {0}\", vaVars.itemName);\n    if (itemJson.description) \n        return response + itemJson.description;\n\n    return gs.getMessage(\"Selected {0}\", vaVars.itemName);\n})()\n","mode":"script"},"applicability":{"value":"","mode":"query"}},"ad91b6b41056401295da325f4ba265bc":{"id":"ad91b6b41056401295da325f4ba265bc","stepType":"Prompt","name":"Proceed","prompt":{"value":"Should I proceed with this?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"829234221c9b4339b5a1d651e52a7eb8","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"3bf11079efbb49ec938d6646bd4c5c92":{"id":"3bf11079efbb49ec938d6646bd4c5c92","stepType":"Decision","name":"Decision"},"d56d26e322d241f39b29e23a90773e99":{"id":"d56d26e322d241f39b29e23a90773e99","stepType":"Decision","name":"Decision"},"f099be30f5764edab20fc53f1cd71bab":{"id":"f099be30f5764edab20fc53f1cd71bab","stepType":"Decision","name":"Decision"},"0277745f7dbf460fb3199451dcadccef":{"id":"0277745f7dbf460fb3199451dcadccef","stepType":"TextOutput","name":"Start Questions","value":{"value":"Alright, now let's select from a few options to finish up your request","mode":"simple"},"applicability":{"value":"","mode":"query"}},"fa311d0758544f6a9671b6000b7099c1":{"id":"fa311d0758544f6a9671b6000b7099c1","stepType":"Decision","name":"Decision"},"f7e8b5a2434d45f7a47fbd954ef730fa":{"id":"f7e8b5a2434d45f7a47fbd954ef730fa","stepType":"Decision","name":"Decision"},"3448582ba24c49d49435ad476a19c4b2":{"id":"3448582ba24c49d49435ad476a19c4b2","stepType":"Prompt","name":"Submit Producer","prompt":{"value":"Alright, I am all set. Do you want me to submit this request?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"c841975739a349f5af02d65c45d0be1a","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"ab71efd4480c44269407192660c182fa":{"id":"ab71efd4480c44269407192660c182fa","stepType":"Decision","name":"Decision"},"2e5375113dce45e8b1e6ddfb53a9cb6b":{"id":"2e5375113dce45e8b1e6ddfb53a9cb6b","name":"Insert the Record","script":"(function execute() {\n   var itemJson = JSON.parse(vaVars.itemJSON);\n    var variablesObj = {};\n    var attachmentIds = [];\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n        if (itemJson.variables[i].type === 33)\n           attachmentIds.push(itemJson.variables[i].value);\n    }\n   var reqObject = {\n       \"sysparm_id\" : itemJson.sys_id,\n       \"sysparm_action\" : 'execute_producer',\n        \"variables\" : variablesObj\n   }\n   var response = new sn_sc.CatItem(itemJson.sys_id).submitProducer(reqObject);\n   if (response) {\n       vaVars.record_id = response.sys_id;\n       vaVars.record_table = response.table;\n       // add attachment to record\n       var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\n       for (var i in mediaLinksFormAttachment)\n           vaSystem.attachToRecord(mediaLinksFormAttachment[i], response.table, response.sys_id);\n\n       // move attachment variable to record\n       var gr = new GlideRecord('sys_attachment');\n       gr.addQuery('sys_id', 'IN' , attachmentIds);\n       gr.query();\n       while (gr.next()) {\n           gr.setValue('table_name', 'ZZ_YY' + response.table);\n           gr.setValue('table_sys_id', response.sys_id);\n           gr.update();\n       }\n   }\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"c3b565ce64bd4a18bbf843605e2f3d9b":{"id":"c3b565ce64bd4a18bbf843605e2f3d9b","stepType":"Prompt","name":"Order Item","prompt":{"value":"Alright, I am all set. Do you want me to submit this request?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"cbf05d46a7bc4e5e88341a9e58ef86d3","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"9915d42fd31649e4a143f39b03402c0b":{"id":"9915d42fd31649e4a143f39b03402c0b","stepType":"Decision","name":"Decision"},"2b3d0d29104440f783b2565443b6d287":{"id":"2b3d0d29104440f783b2565443b6d287","name":"Checkout Cart","script":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var cartname = \"vacart_\" + gs.generateGUID();\n    var cartObj = new sn_sc.CartJS(cartname);\n    cartObj.setRequestedFor(vaVars.request_for);\n\n    var variablesObj = {};\n    var attachmentIds = [];\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n        if (itemJson.variables[i].type === 33)\n           attachmentIds.push(itemJson.variables[i].value);\n    }\n        \n\n    var reqObj = {\n        \"sysparm_id\" : itemJson.sys_id,\n        \"variables\" : variablesObj\n    };\n    cartObj.addToCart(reqObj);\n    var requestResponse = cartObj.checkoutCart(true);\n    var requestGr = new GlideRecord('sc_request');\n    if (requestGr.get(requestResponse.request_id)) {\n        var reqItemGr = new GlideRecord('sc_req_item');\n        reqItemGr.addQuery(\"request\", requestResponse.request_id);\n        reqItemGr.query();\n        if (reqItemGr.next()) {\n            vaVars.record_id = reqItemGr.getUniqueValue();\n            vaVars.record_table = 'sc_req_item';\n            // add attachment to record\n            var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\n            for (var i in mediaLinksFormAttachment)\n                vaSystem.attachToRecord(mediaLinksFormAttachment[i], vaVars.record_table, vaVars.record_id);\n\n        }\n        // move attachment variable to record\n        var gr = new GlideRecord('sys_attachment');\n        gr.addQuery('sys_id', 'IN' , attachmentIds);\n        gr.query();\n        while (gr.next()) {\n            gr.setValue('table_name', 'ZZ_YY' + vaVars.record_table);\n            gr.setValue('table_sys_id', vaVars.record_id);\n            gr.update();\n        }\n    }\n})()","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"74f829c5fa7d40148d7362bbb7f8ec75":{"id":"74f829c5fa7d40148d7362bbb7f8ec75","stepType":"Decision","name":"Decision"},"a291ae1bc6b5466aa5223110b2f1749c":{"id":"a291ae1bc6b5466aa5223110b2f1749c","stepType":"Prompt","name":"Question Date","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"fd8950c771344da9bc6ecf42176b33bb","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"3c418d8557f240a18f0b20e4c44d9f93":{"id":"3c418d8557f240a18f0b20e4c44d9f93","name":"Post Response","script":"(function execute() {\n   var itemJson = JSON.parse(vaVars.itemJSON);\n   vaVars.validation_message = \"\";\n   var quesJson = itemJson.variables[vaVars.qIndex];\n   var type = quesJson.type;\n   switch (type) {\n        case 2:\n        case 6:\n        case 16:\n            var ans = vaInputs.question_text.getValue() || quesJson.display_value;\n            if (ans.trim().length === 0 &amp;&amp; itemJson.variables[vaVars.qIndex].mandatory) {\n                vaVars.validation_message = gs.getMessage('You must answer this question');\n                break;\n            }\n            if (type === 2) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                break;\n            }\n            var q = GlideappQuestion.getQuestion(itemJson.variables[vaVars.qIndex].sys_id);\n            var validresponse = q.validateRegex(ans);\n            if (validresponse)\n                itemJson.variables[vaVars.qIndex].value = ans;\n            else if (!validresponse)\n                vaVars.validation_message = q.getValidationMessage();\n            break;\n        case 1:\n            var ans = quesJson.value == \"Yes\" ? true : false;\n            var value = vaInputs.question_yesno.getValue();\n            value = value == \"\" ? ans : value;\n            ans = value ? gs.getMessage(\"Yes\") : gs.getMessage(\"No\");\n            itemJson.variables[vaVars.qIndex].value = ans;\n            break;\n        case 9:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date.getDisplayValue() || quesJson.display_value;\n            break;\n        case 10:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date_time.getDisplayValue() || quesJson.display_value;\n            break;\n        case 8:\n            var ans = quesJson.value;\n            if (vaInputs.question_reference)\n                ans = vaInputs.question_reference.getValue();\n                \n            itemJson.variables[vaVars.qIndex].value = ans;\n            break;\n        case 3:\n        case 4:\n        case 5:\n        case 18:\n        case 22:\n            var ans = quesJson.value;\n            if (vaInputs.question_choice) {\n                ans = vaInputs.question_choice.getValue();\n                ans = ans == 'no_data' ? '' : ans;\n            }\n            itemJson.variables[vaVars.qIndex].value = ans;\n            break;\n        case 26:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_email.getValue() || quesJson.value;\n            break;\n        case 27:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_url.getValue() || quesJson.value;\n            break;\n        case 28:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_ip_address.getValue() || quesJson.value\n            break;\n        case 31:\n            var ans = quesJson.default_value + '';\n            if (vaVars.request_for)\n                ans = vaVars.request_for;\n            else\n                vaVars.request_for = ans;\n            itemJson.variables[vaVars.qIndex].value = ans;\n   }\n   if (!vaVars.request_for)\n       vaVars.request_for = gs.getUserID() + '';\n   vaVars.itemJSON = JSON.stringify(itemJson);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"9e00f824a4a549eb86c24ab02e67a01e":{"id":"9e00f824a4a549eb86c24ab02e67a01e","stepType":"Decision","name":"Decision"},"3a4bcb0d90ae446abfdcd1e4ea90e234":{"id":"3a4bcb0d90ae446abfdcd1e4ea90e234","stepType":"ScriptOutput","name":"Validation Message","output_type":"single_part","script":"(function execute() {\n      var singleOutMsg = new sn_cs.SinglePartOutMsg();\n       singleOutMsg.setTextPart(gs.getMessage('{0}. Answer the question again', vaVars.validation_message));\n       return singleOutMsg;\n})()","applicability":{"value":"","mode":"query"}},"5fc50002cef04aa0abb05fe2f7bcab6d":{"id":"5fc50002cef04aa0abb05fe2f7bcab6d","stepType":"Prompt","name":"Question Text","prompt":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"c2b03d461bc847b698db334b03ec940b","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"266f400ce9ad430d99eacd32ea9521fe":{"id":"266f400ce9ad430d99eacd32ea9521fe","stepType":"Prompt","name":"Question YesNo","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"c3c6071998d24b928bb9bab53a862e3e","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"fe0c7acfe48d46dfad930e9d1c7110d5":{"stepType":"ReferenceChoicePrompt","name":"Question Reference","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"523a290c0b4a41ed8f638a9b861a741d","id":"fe0c7acfe48d46dfad930e9d1c7110d5","mode":"external","script":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n    var gr = new GlideRecordSecure(variable.reference);\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(gr.getDisplayName());\n    \n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()","noRecordsResponseMsg":{"value":"No Records Found","mode":"simple"},"condition":{"value":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n    var gr = new GlideRecordSecure(variable.reference);\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(gr.getDisplayName());\n    \n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"}},"19539a8dbb4a4db19fecb54424f80c1b":{"id":"19539a8dbb4a4db19fecb54424f80c1b","stepType":"Decision","name":"Decision"},"e6780cdfc2484d14ab6de79d9aa82c8b":{"id":"e6780cdfc2484d14ab6de79d9aa82c8b","name":"Question Reference Next Page","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"e1f5a60595c443e1a98483a824547384":{"id":"e1f5a60595c443e1a98483a824547384","name":"Question Reference Prev Page","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"18a52238a3634fb7b0bdcd8019a1f82f":{"id":"18a52238a3634fb7b0bdcd8019a1f82f","name":"Set Record ID to -1","script":"(function execute() {\n    vaVars.record_id = \"-1\";\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"1e804ae8a6ca4246a5945f5919fbc26a":{"stepType":"ReferenceChoicePrompt","name":"Question Choice","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"810d44081284448299bc452f7019d477","id":"1e804ae8a6ca4246a5945f5919fbc26a","mode":"external","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var options = [];\n    var count = 0;\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n\n    var choices = quesJson.options;\n    count = choices.length;\n    vaVars.count = count;\n    options = choices.splice(index, limit);\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()\n","noRecordsResponseMsg":{"value":"No records found","mode":"simple"},"condition":{"value":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var options = [];\n    var count = 0;\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n\n    var choices = quesJson.options;\n    count = choices.length;\n    vaVars.count = count;\n    options = choices.splice(index, limit);\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()\n","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"}},"c5325e164ab34f7c8bc1db5a899c647f":{"id":"c5325e164ab34f7c8bc1db5a899c647f","stepType":"Decision","name":"Decision"},"dd18d0b0f18c476b91ae787387173096":{"id":"dd18d0b0f18c476b91ae787387173096","name":"Question Choice Next Page","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"e58312f9081a41228129ab7bce91e816":{"id":"e58312f9081a41228129ab7bce91e816","name":"Question Choice Prev Page","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"56931265e8044cf5848d9d92ee4a0f32":{"id":"56931265e8044cf5848d9d92ee4a0f32","stepType":"Prompt","name":"Question Date Time","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"83be2864c3424394abf59da4c3575f4d","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"ec74e54a8c5e432287c3af11dbd438a1":{"id":"ec74e54a8c5e432287c3af11dbd438a1","stepType":"TextOutput","name":"Question Label","value":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"applicability":{"value":"","mode":"query"}},"c16202e2cdba4309941563cc8d9e6bab":{"id":"c16202e2cdba4309941563cc8d9e6bab","stepType":"TextOutput","name":"Container Start Question","value":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"applicability":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if (quesJson.display_title)\n        return true;\n})()\n"}},"74013942a1144ee9827f8c22264938bf":{"id":"74013942a1144ee9827f8c22264938bf","stepType":"Prompt","name":"Proceed with Default Value","prompt":{"value":"Do you want to change it?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return !!quesJson.display_value;\n})()\n"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"5642abe47e9043f8a95ba103193b877f","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"9c56e8b2c0b84d4095c08001f37fbfa7":{"id":"9c56e8b2c0b84d4095c08001f37fbfa7","stepType":"Decision","name":"Decision"},"65c91b6dbde64dc8be281708b0a74cf3":{"stepType":"ReferenceChoicePrompt","name":"Question Requested For","prompt":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"508bf7c3b8a44167970c810aac02b47d","id":"65c91b6dbde64dc8be281708b0a74cf3","mode":"external","script":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    var gr = new GlideRecordSecure('sys_user');\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\n    gr.addQuery(quesJson.qualifier);\n    gr.orderBy(gr.getDisplayName());\n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    if (count &gt; 0) {\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Someone else')\n        });\n    }\n    return options;    \n})()\n","noRecordsResponseMsg":{"value":"I couldn't find a user with that name","mode":"simple"},"condition":{"value":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    var gr = new GlideRecordSecure('sys_user');\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\n    gr.addQuery(quesJson.qualifier);\n    gr.orderBy(gr.getDisplayName());\n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    if (count &gt; 0) {\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Someone else')\n        });\n    }\n    return options;    \n})()\n","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","skippable":{"value":"","mode":"query"}},"e6c36da73ec4429385a3aaeeda1f8bab":{"id":"e6c36da73ec4429385a3aaeeda1f8bab","stepType":"Prompt","name":"Search Requested For","prompt":{"value":"Who should I set it to? ","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"755b41f21f8049c0be9dd862fdc8ebc8","skippable":{"mode":"query","value":""},"inputType":{"format":"Text","script":""}},"92cb7ad1090948a9895f244abadc3c22":{"id":"92cb7ad1090948a9895f244abadc3c22","stepType":"Decision","name":"Decision"},"87030569c30f437886c4be3ec32e3f90":{"id":"87030569c30f437886c4be3ec32e3f90","name":"Requested For Next Page","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"e3913d1e4e404eaea701c30fd53e5911":{"id":"e3913d1e4e404eaea701c30fd53e5911","name":"Is Delegation Allowed","script":"(function execute() {\n    var item = new sn_sc.CatItem(JSON.parse(vaVars.itemJSON).sys_id);\n    vaVars.request_for = vaInputs.question_requested_for.getValue() + '';\n    vaVars.canView = item.isDelegationAllowed(vaVars.request_for);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"b0f5e02ae9b7481b8809cda9c3c0c4d7":{"id":"b0f5e02ae9b7481b8809cda9c3c0c4d7","stepType":"Decision","name":"Decision"},"a2303ea58395438e83490fe045507b10":{"id":"a2303ea58395438e83490fe045507b10","name":"Requested For Previous Page","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"4724ac8318294feb8d8967254f41ecfa":{"id":"4724ac8318294feb8d8967254f41ecfa","stepType":"Prompt","name":"Request For Another User","prompt":{"value":"The selected user does not have access to this item. Do you want to request for  someone else?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"0ce955283111489bb7b64466efc11574","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"51d3d10ead994639871f4df252aa391a":{"id":"51d3d10ead994639871f4df252aa391a","stepType":"Decision","name":"Decision"},"f77ff66de81841ada444c5bf39165e37":{"id":"f77ff66de81841ada444c5bf39165e37","stepType":"Decision","name":"Decision"},"b7c4d17f46ba403fbb92b0f0a89db6a7":{"id":"b7c4d17f46ba403fbb92b0f0a89db6a7","name":"Run OnChange Policies","script":"(function execute() {\n   vaVars.itemJSON = JSON.stringify(new sn_sc.CatalogConversationHelper().runChangePolicies(JSON.parse(vaVars.itemJSON)))\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"f3da80ee7d554c57974175419bbdb1fb":{"id":"f3da80ee7d554c57974175419bbdb1fb","stepType":"Prompt","name":"Question Email","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"7661f33f602448a199628ce1a2e15a32","inputType":{"format":"33513d135b1200101f254d3ba881c7d5","script":""}},"6c1832d555f54fb58670edbc88544f61":{"id":"6c1832d555f54fb58670edbc88544f61","stepType":"Prompt","name":"Question IP Address","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"6a853e56921a495db0759b588a88433f","inputType":{"format":"a860c5945b2200101f254d3ba881c7df","script":""}},"4151096450ae441aa10d7d66864a95ee":{"id":"4151096450ae441aa10d7d66864a95ee","stepType":"Prompt","name":"Question URL","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"181880e85d62463d803afef14fe85dae","inputType":{"format":"77d8b2935b9200101f254d3ba881c7b9","script":""}},"7811e2c230804af9ae12a6237a76d47f":{"id":"7811e2c230804af9ae12a6237a76d47f","stepType":"Decision","name":"Decision"},"f828bdd731ae4d3196f49670d57422ee":{"id":"f828bdd731ae4d3196f49670d57422ee","stepType":"Prompt","name":"Add Attachment","prompt":{"value":"(function execute() {\n    return gs.getMessage('Add attachment?');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return !item.mandatory_attachment;\n})()\n"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"9303dd46fd7d4ca5b46b016f634abecb"},"31d0d50201a94a2592d59694def90149":{"id":"31d0d50201a94a2592d59694def90149","stepType":"Decision","name":"Decision"},"048d05ff93d8485a8c884e4ea24b5b1f":{"id":"048d05ff93d8485a8c884e4ea24b5b1f","stepType":"Prompt","name":"Upload Attachment","prompt":{"value":"(function execute() {\n    return gs.getMessage('Upload attachment');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"9c8b83ffa24b4513a6207547bd521c1e"},"35ba268872b34bf68b968fa1cc201750":{"id":"35ba268872b34bf68b968fa1cc201750","name":"Add Media Links for Form Attachment","script":"(function execute() {\n    if (!!vaVars.media_links_form_attachment)\n        vaVars.media_links_form_attachment = vaVars.media_links_form_attachment + ',' + vaInputs.upload_attachment.getValue();\n    else\n        vaVars.media_links_form_attachment = vaInputs.upload_attachment.getValue();\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"bab76c2aae59460dbea4f41274b34924":{"id":"bab76c2aae59460dbea4f41274b34924","stepType":"Prompt","name":"Add More","prompt":{"value":"(function execute() {\n    return gs.getMessage('Add more?');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"ffb10952df7d4f29adc0b69320e58663"},"64fc395a5afb4acbb90e4d6304be08ad":{"id":"64fc395a5afb4acbb90e4d6304be08ad","stepType":"Decision","name":"Decision"},"78c76edec0de47ffa694924150b4f4d3":{"id":"78c76edec0de47ffa694924150b4f4d3","stepType":"Prompt","name":"Question Attachment","prompt":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"9b244cacd5b448ecac220b3dba13a26b"},"811bd26ad8614eb98391d2a74b607264":{"id":"811bd26ad8614eb98391d2a74b607264","name":"Validate Attachment","script":"(function execute() {\n    vaVars.validation_message = \"\";\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var quesJson = itemJson.variables[vaVars.qIndex];\n    var vaUtils = new global.VAUtils();\n    var arr = vaInputs.question_attachment.getValue().split('/');\n    var mediaId = arr[arr.length - 1];\n    var gr = new GlideRecord('sys_cs_media');\n    gr.addQuery('media_id', mediaId);\n    gr.query();\n    if (gr.next()) {\n        var attachmentId = gr.getValue('sys_attachment_id');\n        var attachRef = new GlideRecord('sys_attachment');\n        if (attachRef.get(attachmentId)) {\n            var file = {\n                name: attachRef.getValue('file_name'),\n                size: attachRef.getValue('size_bytes')\n            };\n            var allowedExtensions = new Array();\n            if (quesJson.allow_extension)\n               allowedExtensions = quesJson.allow_extension.split(';');\n            var field = {\n                allowedExtensions: allowedExtensions,\n                allowedFileSize: quesJson.max_file_size\n            };\n            var result = vaUtils.validateAttachment(file, field);\n            if (result.type == 'success') {\n                quesJson.value = attachmentId;\n                vaVars.itemJSON = JSON.stringify(itemJson);\n                vaInputs.question_attachment.setValue('');\n            } else\n                vaVars.validation_message = result.message;\n        } else \n            vaVars.validation_message = gs.getMessage('Failed to upload the attachment');\n    } else \n        vaVars.validation_message = gs.getMessage('Failed to upload the attachment');\n})()\n","stepType":"ScriptAction","applicability":{"value":"question_attachmentISNOTEMPTY","mode":"query"}},"c891db6ee0c44c249e0f692d54fa9b74":{"id":"c891db6ee0c44c249e0f692d54fa9b74","stepType":"Decision","name":"Decision"},"6841404d6a594da5bfa7a7bc9745aa3c":{"id":"6841404d6a594da5bfa7a7bc9745aa3c","stepType":"ScriptOutput","name":"Validation Message","output_type":"single_part","script":"(function execute() {\n     var singleOutMsg = new sn_cs.SinglePartOutMsg();\n       singleOutMsg.setTextPart(gs.getMessage('{0}. Answer the question again', vaVars.validation_message));\n       vaVars.validation_message = \"\";\n       return singleOutMsg;\n})()\n","applicability":{"value":"","mode":"query"}},"1c3651c570e74828ba604e273ad854c0":{"id":"1c3651c570e74828ba604e273ad854c0","stepType":"Decision","name":"Is Record Producer"},"d9691260ab7c4719aed0e3b516a91bc8":{"id":"d9691260ab7c4719aed0e3b516a91bc8","stepType":"Decision","name":"Execute Contextual Search"},"96a37c71d8174215838d32fb6bd73640":{"id":"96a37c71d8174215838d32fb6bd73640","name":"Get Search Variable And Context","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    if(gs.nil(vaVars.contextualSearchVariable)) {\n        var searchConfig = contextualSearch.getContextualSearchVariableAndContext(vaInputs.catalog_item_id);\n        vaVars.contextualSearchVariable = searchConfig.searchVariable;\n        vaVars.contextualSearchContext = searchConfig.context;\n    }\n    return;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"6a9f4a1b3b2c4051a8faa3154cc4d14a":{"id":"6a9f4a1b3b2c4051a8faa3154cc4d14a","stepType":"Decision","name":"Contextual Search Variable ?"},"a2f76f8d2e1347e6853ad3523ed5a948":{"id":"a2f76f8d2e1347e6853ad3523ed5a948","name":"Contextual Search","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    var response = contextualSearch.search(\n        vaVars.contextualSearchContext, vaInputs.question_text.getValue(), ''\n    );\n    var success = contextualSearch.processSearchResponse(response);\n    if (!success) {\n        return;\n    }  \n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 20, -2);\n    vaVars.contextualSearchResultCount = relevantSearchResults.length;\n    vaVars.contextualSearchResultJsonString = JSON.stringify(relevantSearchResults);\n    vaVars.contextualSearchIndex = 0;\n    return;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"65f1995fc7194945aaf5a1295ac1af2a":{"id":"65f1995fc7194945aaf5a1295ac1af2a","stepType":"Decision","name":"Did the search return results ?"},"d4816f4c699d42bf882185ae591010b7":{"id":"d4816f4c699d42bf882185ae591010b7","stepType":"LinkOutput","name":"Display multi-link","url":{"mode":"simple","value":""},"label":{"mode":"simple","value":""},"header":{"mode":"simple","value":""},"applicability":{"value":"","mode":"query"},"linkType":"multiple","introMsg":{"value":"I found some information that might help you:","mode":"simple"},"listOfLinks":"(function execute(header) {\n\tvar contextualSearch = new global.VAGlobalContextualSearchUtil();\n\tvar variables = {\n\t\tlimit: vaVars.contextualSearchResultLimit,\n\t\tindex: vaVars.contextualSearchIndex,\n\t\tsearch_result_json_string: vaVars.contextualSearchResultJsonString,\n\t\tportal: ''\n\t}\n\tvar groupedLinksOutMsg = contextualSearch.getLinks(header, variables);\n\treturn groupedLinksOutMsg;\n})(header)\n"},"4547fbfa0d1145a58f0f624930070ad3":{"id":"4547fbfa0d1145a58f0f624930070ad3","stepType":"Decision","name":"Did Articles Help ?"},"94be6bf8aa7249119803f63f4c943b61":{"id":"94be6bf8aa7249119803f63f4c943b61","stepType":"Prompt","name":"Did Articles Help","prompt":{"value":"Did any of this information resolve your issue?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"variableId":"8c2169ef87774005a60fa8109175cbee"},"3a50f996b0564424860c134c912f188f":{"id":"3a50f996b0564424860c134c912f188f","stepType":"Decision","name":"Confirmation Required ?"},"43ccf5aca87c48f1a7eec48706419084":{"id":"43ccf5aca87c48f1a7eec48706419084","stepType":"TextOutput","name":"Requested For Value Acknowledge Message","value":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return !quesJson.display_value ? quesJson.label : quesJson.label + '\\n' + quesJson.display_value;\n})()\n","mode":"script"},"applicability":{"mode":"query","value":""}}},"edges":[{"id":"7c58911665ca42e0907402b630faffd6","edgeType":"Edge","source":"43ccf5aca87c48f1a7eec48706419084","target":"74013942a1144ee9827f8c22264938bf","sourcePort":"","targetPort":""},{"id":"3e8c6b9db25949fab2673d0959a55218","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"43ccf5aca87c48f1a7eec48706419084","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if (JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 31)\n        return true;\n})()\n"},"label":"Question Requested For"},{"id":"6c3604f5230846aca6acddd769f3b624","edgeType":"Edge","source":"78c76edec0de47ffa694924150b4f4d3","target":"811bd26ad8614eb98391d2a74b607264","sourcePort":"","targetPort":""},{"id":"696eb1ef41a34fcda3e48066cd8ae6a2","edgeType":"Edge","source":"35ba268872b34bf68b968fa1cc201750","target":"bab76c2aae59460dbea4f41274b34924","sourcePort":"","targetPort":""},{"id":"e80af80bdf2b459abe946d04af18b08f","edgeType":"Branch","source":"92cb7ad1090948a9895f244abadc3c22","target":"87030569c30f437886c4be3ec32e3f90","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_requested_for.getValue() === 'next';\n})()\n"},"label":"Requested For Next"},{"id":"2e63cf34b9734f069ab25b883011482d","edgeType":"Branch","source":"f7e8b5a2434d45f7a47fbd954ef730fa","target":"c3b565ce64bd4a18bbf843605e2f3d9b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name !== 'sc_cat_item_producer')\n        return true;\nreturn false;\n})()\n"},"label":"Catalog Item"},{"id":"0c93b554c2b44c0eb469c92ce6ac6845","edgeType":"Branch","source":"c5325e164ab34f7c8bc1db5a899c647f","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_choice.getValue();\n    var condition = valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev';\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})();"},"label":"Question Choice Chosen"},{"id":"409a82a8814745f4b0ee2adb846a1e46","edgeType":"Edge","source":"038fdd71a34340ab81a9913d00551286","target":"ff689f5bfdb3489bafd261f4692681c9","sourcePort":"","targetPort":""},{"id":"d8bbb8ac90f74659adfd273baf5b98b7","edgeType":"Edge","source":"a64d04aea6ab4f07b2d6ce77043bb415","target":"ad91b6b41056401295da325f4ba265bc","sourcePort":"","targetPort":""},{"id":"bbc837badedb4cd4af419255e593f2f3","edgeType":"Edge","source":"ad91b6b41056401295da325f4ba265bc","target":"3bf11079efbb49ec938d6646bd4c5c92","sourcePort":"","targetPort":""},{"id":"bb35aaf400104c51b62c0b1af0dd046f","edgeType":"Branch","source":"3bf11079efbb49ec938d6646bd4c5c92","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":"","expression":{"value":"proceed=false","mode":"query"},"label":"No"},{"id":"3e18a21869964474b927c8b9f0cd83d0","edgeType":"Branch","source":"3bf11079efbb49ec938d6646bd4c5c92","target":"d56d26e322d241f39b29e23a90773e99","sourcePort":"","targetPort":"","expression":{"value":"proceed=true","mode":"query"},"label":"Yes"},{"id":"fcacc77cee044b698ac784bbaed2d093","edgeType":"Branch","source":"d56d26e322d241f39b29e23a90773e99","target":"f099be30f5764edab20fc53f1cd71bab","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).va_support;\n})()"},"label":"Has VA Support"},{"id":"dad791aac2a8426ab710285815c257d6","edgeType":"Branch","source":"f099be30f5764edab20fc53f1cd71bab","target":"fa311d0758544f6a9671b6000b7099c1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return false;\n    }\n    //No variables that we can show\n    return true;\n})()\n"},"label":"Item with no variables"},{"id":"baacb44a3dbb40008b8718ca4cbd3d0e","edgeType":"Branch","source":"f099be30f5764edab20fc53f1cd71bab","target":"0277745f7dbf460fb3199451dcadccef","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n\n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return true;\n    }\n    //No variables  that we can show\n    return false;\n})()\n"},"label":"Item with variables"},{"id":"407ba095cbb44c33b7816ae5477acf00","edgeType":"Edge","source":"0277745f7dbf460fb3199451dcadccef","target":"fa311d0758544f6a9671b6000b7099c1","sourcePort":"","targetPort":""},{"id":"38bb7dcabe1c46ad97438ec5ab38d8cd","edgeType":"Branch","source":"f7e8b5a2434d45f7a47fbd954ef730fa","target":"3448582ba24c49d49435ad476a19c4b2","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name === 'sc_cat_item_producer')\n        return true;\nreturn false;\n})()\n"},"label":"Record Producer"},{"id":"3ef3d3ec6d0642e1b42e8e82b1df071c","edgeType":"Edge","source":"3448582ba24c49d49435ad476a19c4b2","target":"ab71efd4480c44269407192660c182fa","sourcePort":"","targetPort":""},{"id":"47170baaac1645ad9542e1e1b37f60e1","edgeType":"Branch","source":"ab71efd4480c44269407192660c182fa","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":"","expression":{"value":"submit_producer=","mode":"query"},"label":"Don't Submit"},{"id":"a06169565da9452480c28a57bc67b3d0","edgeType":"Branch","source":"ab71efd4480c44269407192660c182fa","target":"2e5375113dce45e8b1e6ddfb53a9cb6b","sourcePort":"","targetPort":"","expression":{"value":"submit_producer=true","mode":"query"},"label":"Submit Now"},{"id":"69e1e06ebd414e82a779927ddd430f80","edgeType":"Edge","source":"2e5375113dce45e8b1e6ddfb53a9cb6b","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":""},{"id":"8198a6261ae74202bf807bc03eccb792","edgeType":"Edge","source":"c3b565ce64bd4a18bbf843605e2f3d9b","target":"9915d42fd31649e4a143f39b03402c0b","sourcePort":"","targetPort":""},{"id":"42d91a4554794d219d8a8c374363dc54","edgeType":"Branch","source":"9915d42fd31649e4a143f39b03402c0b","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":"","expression":{"value":"order_item=","mode":"query"},"label":"Don't Order"},{"id":"e7883d8f5d42428ea62784f5c8737b48","edgeType":"Branch","source":"9915d42fd31649e4a143f39b03402c0b","target":"2b3d0d29104440f783b2565443b6d287","sourcePort":"","targetPort":"","expression":{"value":"order_item=true","mode":"query"},"label":"Order Now"},{"id":"e791d79d50004b93add7aba88b9a7110","edgeType":"Edge","source":"2b3d0d29104440f783b2565443b6d287","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":""},{"id":"0c296eda689c4f09ba3333a1593dfcbe","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"a291ae1bc6b5466aa5223110b2f1749c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 9;\n})()\n"},"label":"Date Question"},{"id":"8017c22b773f48a09f3cd9c5158f6f50","edgeType":"Edge","source":"a291ae1bc6b5466aa5223110b2f1749c","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"fa5f0db3b5d24505bd04e339974509fc","edgeType":"Edge","source":"3c418d8557f240a18f0b20e4c44d9f93","target":"9e00f824a4a549eb86c24ab02e67a01e","sourcePort":"","targetPort":""},{"id":"a74b7091aaa94500bbb62ae5fcbfbda6","edgeType":"Branch","source":"9e00f824a4a549eb86c24ab02e67a01e","target":"3a4bcb0d90ae446abfdcd1e4ea90e234","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length !== 0;\n})()\n"},"label":"Repeat Question"},{"id":"f178f18e588c4492a12cec40e3c964a1","edgeType":"Edge","source":"3a4bcb0d90ae446abfdcd1e4ea90e234","target":"5fc50002cef04aa0abb05fe2f7bcab6d","sourcePort":"","targetPort":""},{"id":"fe203ad7400c497f98bb10b8fcc5bd83","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"5fc50002cef04aa0abb05fe2f7bcab6d","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    return type === 2 || type === 6 || type === 16;\n})()"},"label":"Text Type Question"},{"id":"f7f99c9e3e2045178df5cced12e08796","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"266f400ce9ad430d99eacd32ea9521fe","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 1;\n})()"},"label":"Yes or No Question"},{"id":"579a3eecb4e6429cab08042ea49ca80b","edgeType":"Edge","source":"266f400ce9ad430d99eacd32ea9521fe","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"7ad145bed1944d7da3fe4a3ec40800a4","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"fe0c7acfe48d46dfad930e9d1c7110d5","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 8;\n})()"},"label":"Reference Question"},{"id":"fa0da35914e84ad8b26e0e03db9af285","edgeType":"Edge","source":"fe0c7acfe48d46dfad930e9d1c7110d5","target":"19539a8dbb4a4db19fecb54424f80c1b","sourcePort":"","targetPort":""},{"id":"773fb15e0f6c4d6bbb11b948cfda5382","edgeType":"Branch","source":"19539a8dbb4a4db19fecb54424f80c1b","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_reference.getValue();\n    var condition = valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev';\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})();"},"label":"Question Reference Chosen"},{"id":"8530b1c9b8ee4d2b9656d02b60722c05","edgeType":"Branch","source":"19539a8dbb4a4db19fecb54424f80c1b","target":"e6780cdfc2484d14ab6de79d9aa82c8b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_reference.getValue() === 'next';\n})()\n"},"label":"Question Reference Next"},{"id":"0f7bf5b621be46afbee712fab7cfb5a7","edgeType":"Edge","source":"e6780cdfc2484d14ab6de79d9aa82c8b","target":"fe0c7acfe48d46dfad930e9d1c7110d5","sourcePort":"","targetPort":""},{"id":"6a63ad320f6842e3a73fc0e2a8f44108","edgeType":"Branch","source":"19539a8dbb4a4db19fecb54424f80c1b","target":"e1f5a60595c443e1a98483a824547384","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_reference.getValue() === 'prev';\n})()\n"},"label":"Question Refrence Prev"},{"id":"3653a35d5a244ab4b2f8f0cc31e8cad3","edgeType":"Edge","source":"e1f5a60595c443e1a98483a824547384","target":"fe0c7acfe48d46dfad930e9d1c7110d5","sourcePort":"","targetPort":""},{"id":"ee127bc73af145879b47d5a029464c48","edgeType":"Branch","source":"d56d26e322d241f39b29e23a90773e99","target":"18a52238a3634fb7b0bdcd8019a1f82f","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !JSON.parse(vaVars.itemJSON).va_support;\n})()"},"label":"No VA Support"},{"id":"e3362d7ed3ac43d284bdee4a5893f9a6","edgeType":"Edge","source":"18a52238a3634fb7b0bdcd8019a1f82f","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":""},{"id":"811fe1c460d94d8481fc6d2c134e9649","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"1e804ae8a6ca4246a5945f5919fbc26a","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    return type === 3 || type === 4 || type === 5 || type === 18 || type === 22;\n})()\n"},"label":"Choice Question"},{"id":"9de4a52b7ca44dd686e351696df20cb8","edgeType":"Edge","source":"1e804ae8a6ca4246a5945f5919fbc26a","target":"c5325e164ab34f7c8bc1db5a899c647f","sourcePort":"","targetPort":""},{"id":"9e6270cf2b2c47e7a53bd2f858067945","edgeType":"Branch","source":"c5325e164ab34f7c8bc1db5a899c647f","target":"dd18d0b0f18c476b91ae787387173096","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_choice.getValue() === 'next';\n})()\n"},"label":"Question Choice Next"},{"id":"bb53d92f51004e30a51262de0f691fa5","edgeType":"Edge","source":"dd18d0b0f18c476b91ae787387173096","target":"1e804ae8a6ca4246a5945f5919fbc26a","sourcePort":"","targetPort":""},{"id":"9579c9855da548c5a1f3f02312f1bc20","edgeType":"Branch","source":"c5325e164ab34f7c8bc1db5a899c647f","target":"e58312f9081a41228129ab7bce91e816","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_choice.getValue() === 'prev';\n})()\n"},"label":"Question Choice Prev"},{"id":"bd1aaf2786fc4357b361e9ff74712b94","edgeType":"Edge","source":"e58312f9081a41228129ab7bce91e816","target":"1e804ae8a6ca4246a5945f5919fbc26a","sourcePort":"","targetPort":""},{"id":"b1c8ef7fe40d4b538a785a1058b89bff","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"56931265e8044cf5848d9d92ee4a0f32","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 10;\n})()\n"},"label":"Date-Time Question"},{"id":"78c456ed3d344e528cc67ddedad903de","edgeType":"Edge","source":"56931265e8044cf5848d9d92ee4a0f32","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"13a88d2cb79640209e6f8b043a1b05c9","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"ec74e54a8c5e432287c3af11dbd438a1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 11;\n})()"},"label":"Question Label"},{"id":"dee4710cd956486a8acc21a73cbb8e2f","edgeType":"Edge","source":"ec74e54a8c5e432287c3af11dbd438a1","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"6a4d1c3d24f0483da2c15daf8f60029a","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"c16202e2cdba4309941563cc8d9e6bab","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    if (type === 0 || type === 12 || type === 19 || type === 20 || type === 24)\n        return true;\n})()\n"},"label":"Container Or Break Questions"},{"id":"b6c6c95da8df4064a11981567d2b743b","edgeType":"Edge","source":"c16202e2cdba4309941563cc8d9e6bab","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"baf020cf354f433c91f90f5bdf14d684","edgeType":"Edge","source":"74013942a1144ee9827f8c22264938bf","target":"9c56e8b2c0b84d4095c08001f37fbfa7","sourcePort":"","targetPort":""},{"id":"dbefbf0e2bdb4b529e3a5231e41774ae","edgeType":"Branch","source":"9c56e8b2c0b84d4095c08001f37fbfa7","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return !!quesJson.display_value &amp;&amp; !vaInputs.proceed_with_default_value.getValue();\n})()"},"label":"Proceed with order"},{"id":"cb0892775e8442bca0e3e472e2539f90","edgeType":"Branch","source":"9c56e8b2c0b84d4095c08001f37fbfa7","target":"e6c36da73ec4429385a3aaeeda1f8bab","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return !quesJson.display_value || vaInputs.proceed_with_default_value.getValue();\n})()"},"label":"Change Requested For"},{"id":"82ce0eb3363d40519075323289456bb0","edgeType":"Edge","source":"e6c36da73ec4429385a3aaeeda1f8bab","target":"65c91b6dbde64dc8be281708b0a74cf3","sourcePort":"","targetPort":""},{"id":"724b3eefa4ec4c73b462528b4b25a29d","edgeType":"Edge","source":"65c91b6dbde64dc8be281708b0a74cf3","target":"92cb7ad1090948a9895f244abadc3c22","sourcePort":"","targetPort":""},{"id":"20a8057e52654c7785d247da391f861a","edgeType":"Edge","source":"87030569c30f437886c4be3ec32e3f90","target":"65c91b6dbde64dc8be281708b0a74cf3","sourcePort":"","targetPort":""},{"id":"7ca36c282c5d4b6486bb87fc1cc60c6f","edgeType":"Branch","source":"92cb7ad1090948a9895f244abadc3c22","target":"e6c36da73ec4429385a3aaeeda1f8bab","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !vaInputs.question_requested_for.getValue() || vaInputs.question_requested_for.getValue() === 'search';\n})()\n"},"label":"Search Requested For"},{"id":"e0af023b0a994067b50dd434cf2a16f7","edgeType":"Branch","source":"92cb7ad1090948a9895f244abadc3c22","target":"e3913d1e4e404eaea701c30fd53e5911","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_requested_for.getValue();\n    var condition = valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev';\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})();"},"label":"Requested For Chosen"},{"id":"b65453189cb340c4b52ebab56398522b","edgeType":"Edge","source":"e3913d1e4e404eaea701c30fd53e5911","target":"b0f5e02ae9b7481b8809cda9c3c0c4d7","sourcePort":"","targetPort":""},{"id":"bfdcabe57aa94bb0b8c461b05fcde513","edgeType":"Branch","source":"b0f5e02ae9b7481b8809cda9c3c0c4d7","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.canView;\n})()\n"},"label":"Can View"},{"id":"4b243619e28d44e39c41591434db6af6","edgeType":"Branch","source":"92cb7ad1090948a9895f244abadc3c22","target":"a2303ea58395438e83490fe045507b10","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_requested_for.getValue() === 'prev';\n})()\n"},"label":"Requested For Prev"},{"id":"b8a095b4b6424f4fabe7c68df49c83c4","edgeType":"Edge","source":"a2303ea58395438e83490fe045507b10","target":"65c91b6dbde64dc8be281708b0a74cf3","sourcePort":"","targetPort":""},{"id":"3fbb7a752c224479b914c344712941e6","edgeType":"Branch","source":"b0f5e02ae9b7481b8809cda9c3c0c4d7","target":"4724ac8318294feb8d8967254f41ecfa","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !vaVars.canView\n})()\n"},"label":"Cannot View"},{"id":"5bbaf834ad064474be52cc0032af3d3a","edgeType":"Edge","source":"4724ac8318294feb8d8967254f41ecfa","target":"51d3d10ead994639871f4df252aa391a","sourcePort":"","targetPort":""},{"id":"0d7086192ff847baae7e6f2d264d66ad","edgeType":"Branch","source":"51d3d10ead994639871f4df252aa391a","target":"e6c36da73ec4429385a3aaeeda1f8bab","sourcePort":"","targetPort":"","expression":{"value":"request_for_another_user=true","mode":"query"},"label":"Request for Another User"},{"id":"0c1927e306f94a85af1618d936f22ae7","edgeType":"Branch","source":"51d3d10ead994639871f4df252aa391a","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":"","expression":{"value":"request_for_another_user=","mode":"query"},"label":"End Conversation"},{"id":"4fd174fe5fed430eb9d585d8af904bb4","edgeType":"Branch","source":"9e00f824a4a549eb86c24ab02e67a01e","target":"f77ff66de81841ada444c5bf39165e37","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length === 0;\n})()\n"},"label":"Next Question"},{"id":"7d78dd6730ab4322ac31a88c2389e706","edgeType":"Branch","source":"f77ff66de81841ada444c5bf39165e37","target":"fa311d0758544f6a9671b6000b7099c1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).has_on_change_policies;\n})()\n"},"label":"No onChange Policies"},{"id":"789ed9620b1f4e37a65240e9bc2b24c5","edgeType":"Branch","source":"f77ff66de81841ada444c5bf39165e37","target":"b7c4d17f46ba403fbb92b0f0a89db6a7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).has_on_change_policies;\n})()\n"},"label":"Has onChange Policies"},{"id":"9aa810ed496e4262987dae3dd5bfc888","edgeType":"Edge","source":"b7c4d17f46ba403fbb92b0f0a89db6a7","target":"fa311d0758544f6a9671b6000b7099c1","sourcePort":"","targetPort":""},{"id":"79ab668fa7d744b4a82846f5280d6d25","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var unSupportedTypes = vaVars.unsupportedVarTypes.split(',');\n   return unSupportedTypes.indexOf(String(JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type)) !== -1;\n})()\n"},"label":"Unsupported  Variable  Types"},{"id":"0dd9a7e8d9c0417cab085bae818e5165","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"f3da80ee7d554c57974175419bbdb1fb","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\n})()\n"},"label":"Email Question"},{"id":"07c607a142334b38a5e695a1729eeef7","edgeType":"Edge","source":"f3da80ee7d554c57974175419bbdb1fb","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"cf2e6e3192654769be768376871edf49","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"6c1832d555f54fb58670edbc88544f61","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\n})()\n"},"label":"Ip Address Question"},{"id":"18bf90fe0b2f45ffbe488fb78ad625c6","edgeType":"Edge","source":"6c1832d555f54fb58670edbc88544f61","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"8c6965cae041445db21d26c37ccab1bf","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"4151096450ae441aa10d7d66864a95ee","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\n})()\n"},"label":"URL Question"},{"id":"20793aaadac74771b17998898d7fd143","edgeType":"Edge","source":"4151096450ae441aa10d7d66864a95ee","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"137f67f096d144ba970055c6a8e3345a","edgeType":"Branch","source":"fa311d0758544f6a9671b6000b7099c1","target":"7811e2c230804af9ae12a6237a76d47f","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return false;\n    }\n    //No variables that we can show\n    return true;\n})()"},"label":"Questions Done"},{"id":"9315b3dd60ff4bdaad9e9cb69b9fba32","edgeType":"Branch","source":"7811e2c230804af9ae12a6237a76d47f","target":"f7e8b5a2434d45f7a47fbd954ef730fa","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.no_attachments === true;\n})()\n"},"label":"Has  No Attachment"},{"id":"4ef5a4643b734b3ea3aed3e0b7a638f1","edgeType":"Branch","source":"7811e2c230804af9ae12a6237a76d47f","target":"f828bdd731ae4d3196f49670d57422ee","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.no_attachments === false;\n})()\n"},"label":"Has Attachment"},{"id":"03a6fa01725348bcab49dd597b6d1765","edgeType":"Edge","source":"f828bdd731ae4d3196f49670d57422ee","target":"31d0d50201a94a2592d59694def90149","sourcePort":"","targetPort":""},{"id":"fa13fe7b7db54ffba9e4e49f0e231cb0","edgeType":"Branch","source":"31d0d50201a94a2592d59694def90149","target":"f7e8b5a2434d45f7a47fbd954ef730fa","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return !item.mandatory_attachment &amp;&amp; !vaInputs.add_attachment.getValue();\n})()\n"},"label":"No"},{"id":"a4c42ba796c54e34afd76eebc903463c","edgeType":"Branch","source":"31d0d50201a94a2592d59694def90149","target":"048d05ff93d8485a8c884e4ea24b5b1f","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.mandatory_attachment || vaInputs.add_attachment.getValue();\n})()\n"},"label":"Yes"},{"id":"2d2360ff9c444330b63eb0a79c62774d","edgeType":"Edge","source":"048d05ff93d8485a8c884e4ea24b5b1f","target":"35ba268872b34bf68b968fa1cc201750","sourcePort":"","targetPort":""},{"id":"341add08eb9448e6a324a54ba49245c8","edgeType":"Edge","source":"bab76c2aae59460dbea4f41274b34924","target":"64fc395a5afb4acbb90e4d6304be08ad","sourcePort":"","targetPort":""},{"id":"e8578bcb9397408ca548310106e8eac3","edgeType":"Branch","source":"64fc395a5afb4acbb90e4d6304be08ad","target":"048d05ff93d8485a8c884e4ea24b5b1f","sourcePort":"","targetPort":"","expression":{"value":"add_more=true","mode":"query"},"label":"Yes"},{"id":"4caccd8c5d334df3adf38c059950ce06","edgeType":"Branch","source":"64fc395a5afb4acbb90e4d6304be08ad","target":"f7e8b5a2434d45f7a47fbd954ef730fa","sourcePort":"","targetPort":"","expression":{"value":"add_more=","mode":"query"},"label":"No"},{"id":"1be422c3fdbf4db39e20c1647cad9128","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"78c76edec0de47ffa694924150b4f4d3","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 33;\n})()\n"},"label":"Question Attachment"},{"id":"ab788b4f9bf14e98b25a722762f853d5","edgeType":"Edge","source":"811bd26ad8614eb98391d2a74b607264","target":"c891db6ee0c44c249e0f692d54fa9b74","sourcePort":"","targetPort":""},{"id":"61bf423f55af43f4a874188075051fa5","edgeType":"Branch","source":"c891db6ee0c44c249e0f692d54fa9b74","target":"f77ff66de81841ada444c5bf39165e37","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length === 0;\n})()\n"},"label":"Next Question"},{"id":"fe3523ee0c574c35ad95ec5a6458a5f2","edgeType":"Branch","source":"c891db6ee0c44c249e0f692d54fa9b74","target":"6841404d6a594da5bfa7a7bc9745aa3c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length !== 0;\n})()\n"},"label":"Repeat Question"},{"id":"9b102188760445e096de7db09f17f4bc","edgeType":"Edge","source":"6841404d6a594da5bfa7a7bc9745aa3c","target":"78c76edec0de47ffa694924150b4f4d3","sourcePort":"","targetPort":""},{"id":"2499c0495ef74d73ad9b57c40a7103a4","edgeType":"Edge","source":"5fc50002cef04aa0abb05fe2f7bcab6d","target":"1c3651c570e74828ba604e273ad854c0","sourcePort":"","targetPort":""},{"id":"3aa1fc4a831b4d99b4fbeb1066ab6648","edgeType":"Branch","source":"1c3651c570e74828ba604e273ad854c0","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n   \n    if (itemJson.sys_class_name !== 'sc_cat_item_producer') {\n        return true;\n    }    \n    return false;\n})()\n"},"label":"No"},{"id":"7e831945a2c54cbd9673df179d33b173","edgeType":"Branch","source":"1c3651c570e74828ba604e273ad854c0","target":"d9691260ab7c4719aed0e3b516a91bc8","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name === 'sc_cat_item_producer') {\n        return true;\n    }    \n    return false;\n})()"},"label":"Yes"},{"id":"e911f9877040426685b7524c2803d648","edgeType":"Branch","source":"d9691260ab7c4719aed0e3b516a91bc8","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /**\n     * Topic should pass execute_contextual_search as input if contextual search is required\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\n     */\n    var ans = vaInputs.question_text.getValue();\n    if(vaInputs.execute_contextual_search == 'false' || ans.trim().length === 0) {\n        return true;\n    }\n    return false;    \n})()\n"},"label":"No","fromNode":"- Execute Contextual Search","toNode":"3c418d8557f240a18f0b20e4c44d9f93","toEdge":"e911f9877040426685b7524c2803d648","addNode":{},"nodeEntries":{}},{"id":"42d49cfc91a647299c594cb2ce70039d","edgeType":"Branch","source":"d9691260ab7c4719aed0e3b516a91bc8","target":"96a37c71d8174215838d32fb6bd73640","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /**\n     * Topic should pass execute_contextual_search as input if contextual search is required\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\n     */\n    var ans = vaInputs.question_text.getValue();\n    if(vaInputs.execute_contextual_search == 'true'  &amp;&amp; ans.trim().length !== 0) {\n        return true;\n    }\n    return false;     \n})()\n"},"label":"Yes"},{"id":"21b3a6f94ed8478eaadf4768f9ccf69a","edgeType":"Edge","source":"96a37c71d8174215838d32fb6bd73640","target":"6a9f4a1b3b2c4051a8faa3154cc4d14a","sourcePort":"","targetPort":""},{"id":"39d016234acc4b4e9c7281f3ca3eba76","edgeType":"Branch","source":"6a9f4a1b3b2c4051a8faa3154cc4d14a","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if(vaVars.contextualSearchVariable !== quesJson.sys_id) {\n        return true;\n    }\n    return false;\n})()"},"label":"No","fromNode":"- Contextual Search Variable ?","toNode":"3c418d8557f240a18f0b20e4c44d9f93","toEdge":"39d016234acc4b4e9c7281f3ca3eba76","addNode":{},"nodeEntries":{}},{"id":"b0d23db53c9e422abb0414e298c1f656","edgeType":"Branch","source":"6a9f4a1b3b2c4051a8faa3154cc4d14a","target":"a2f76f8d2e1347e6853ad3523ed5a948","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if(vaVars.contextualSearchVariable === quesJson.sys_id) {\n        return true;\n    }\n    return false;\n})()"},"label":"Yes"},{"id":"12b85d1eca574b3c88df65996f26ee96","edgeType":"Edge","source":"a2f76f8d2e1347e6853ad3523ed5a948","target":"65f1995fc7194945aaf5a1295ac1af2a","sourcePort":"","targetPort":""},{"id":"0dc833f7988342f2a162fcea0e176549","edgeType":"Branch","source":"65f1995fc7194945aaf5a1295ac1af2a","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if(vaVars.contextualSearchResultCount &lt;= 0){\n        return true;\n    }\n    return false;\n})()\n"},"label":"No","fromNode":"- Did the search return results ?","toNode":"3c418d8557f240a18f0b20e4c44d9f93","toEdge":"0dc833f7988342f2a162fcea0e176549","addNode":{},"nodeEntries":{}},{"id":"623bdda65a494d58a99f969ea196bdfa","edgeType":"Branch","source":"65f1995fc7194945aaf5a1295ac1af2a","target":"d4816f4c699d42bf882185ae591010b7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if(vaVars.contextualSearchResultCount &gt; 0){\n        return true;\n    }\n    return false;\n})()\n"},"label":"Yes"},{"id":"b37e596ea9c3496a9eb02a021a337842","edgeType":"Branch","source":"4547fbfa0d1145a58f0f624930070ad3","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":"","expression":{"value":"did_articles_help=true","mode":"query"},"label":"Yes"},{"id":"30c399c07b594885842247a687b560c3","edgeType":"Branch","source":"4547fbfa0d1145a58f0f624930070ad3","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"value":"did_articles_help!=true","mode":"query"},"label":"No","fromNode":"- Decision","toNode":"3c418d8557f240a18f0b20e4c44d9f93","toEdge":"30c399c07b594885842247a687b560c3","addNode":{},"nodeEntries":{}},{"id":"e3f3d5eb0c894b428d21bf13ed7bdb1a","edgeType":"Edge","source":"d4816f4c699d42bf882185ae591010b7","target":"94be6bf8aa7249119803f63f4c943b61","sourcePort":"","targetPort":""},{"id":"7c5fc3fd73714c2ca64d64faa5b6c7e6","edgeType":"Edge","source":"94be6bf8aa7249119803f63f4c943b61","target":"4547fbfa0d1145a58f0f624930070ad3","sourcePort":"","targetPort":""},{"id":"0b4ffcefcdc4450da9fab3c438ae288a","edgeType":"Edge","source":"ff689f5bfdb3489bafd261f4692681c9","target":"3a50f996b0564424860c134c912f188f","sourcePort":"","targetPort":""},{"id":"56a9a28585b4418bb5fcb449e21fe7a3","edgeType":"Branch","source":"3a50f996b0564424860c134c912f188f","target":"a64d04aea6ab4f07b2d6ce77043bb415","sourcePort":"","targetPort":"","expression":{"value":"confirm_catalog_item=true","mode":"query"},"label":"Yes"},{"id":"31374a7c2353455eb9367de01e4a1964","edgeType":"Branch","source":"3a50f996b0564424860c134c912f188f","target":"fa311d0758544f6a9671b6000b7099c1","sourcePort":"","targetPort":"","expression":{"value":"confirm_catalog_item=false","mode":"query"},"label":"No","fromNode":"- Confirmation Required ?","toNode":"fa311d0758544f6a9671b6000b7099c1","toEdge":"31374a7c2353455eb9367de01e4a1964","addNode":{},"nodeEntries":{}},{"id":"4a22ea96a2f847d0a6fe7a95c55568f9","edgeType":"Branch","source":"fa311d0758544f6a9671b6000b7099c1","target":"74f829c5fa7d40148d7362bbb7f8ec75","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n     var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n\n    do {\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n        vaVars.qIndex = qIndex;\n        return true;\n    }\n    return false;\n})()"},"label":"Questions Left"}]}}}</graph>
        <key_phrases/>
        <library>true</library>
        <live_agent>false</live_agent>
        <name>Raj Request Catalog Item</name>
        <nlu_intent/>
        <nlu_intent_label/>
        <nlu_model/>
        <nlu_model_label/>
        <nlu_provider/>
        <roles/>
        <source_topic_id>daddca37dbf620107f12e04a489619fb</source_topic_id>
        <sys_class_name>sys_cb_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-03-16 22:12:11</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>2c4ec2b3dbf620107f12e04a489619ce</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Raj Request Catalog Item</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sys_cb_topic_2c4ec2b3dbf620107f12e04a489619ce</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-03-16 22:12:11</sys_updated_on>
        <type>TOPIC_BLOCK</type>
        <variables/>
    </sys_cb_topic>
    <sys_variable_value action="DELETE" query="document_key=2c4ec2b3dbf620107f12e04a489619ce"/>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</application>
        <file_path/>
        <instance_id>02066f27db9253408264f70fbf9619a8</instance_id>
        <instance_name>dev60302</instance_name>
        <name>sys_cb_topic_2c4ec2b3dbf620107f12e04a489619ce</name>
        <payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_topic"><sys_cb_topic action="INSERT_OR_UPDATE"><applicability/><category/><channels/><connect_queue/><description/><flexible_conversation_switching>true</flexible_conversation_switching><graph>{"graph_api_version":"1.0.21","variables":{"1131daa088d44c089a60fded925d24f0":{"id":"1131daa088d44c089a60fded925d24f0","name":"catalog_item_id","label":"Catalog_item_id","defaultValue":"","varType":"string","category":"vaInputs"},"9381e4fde5e7447e9eef151e8e7d8702":{"id":"9381e4fde5e7447e9eef151e8e7d8702","value":{"mode":"script","value":"(function execute() {\n    return gs.getProperty('glide.servlet.uri');\n})()"},"name":"baseUri","label":"baseUri","varType":"script","category":"vaVars"},"745a837e10f043a38efdbf1b08800fd3":{"id":"745a837e10f043a38efdbf1b08800fd3","value":{"mode":"simple","value":""},"name":"itemJSON","label":"itemJSON","varType":"script","category":"vaVars"},"f61bf8223b43462ea94fc7fa7a6fc417":{"id":"f61bf8223b43462ea94fc7fa7a6fc417","value":{"mode":"simple","value":""},"name":"itemName","label":"itemName","varType":"script","category":"vaVars"},"a06d4557c70947488597ad7fe29358f4":{"id":"a06d4557c70947488597ad7fe29358f4","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"record_id","label":"record_id","varType":"script","category":"vaVars"},"c5da60988453406889bfa6c17a636f64":{"id":"c5da60988453406889bfa6c17a636f64","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"record_table","label":"record_table","varType":"script","category":"vaVars"},"829234221c9b4339b5a1d651e52a7eb8":{"id":"829234221c9b4339b5a1d651e52a7eb8","name":"proceed","label":"Proceed","varType":"boolean","category":"vaInputs"},"90aa4f0077db49aaaa0932c0af3d4047":{"id":"90aa4f0077db49aaaa0932c0af3d4047","value":{"mode":"simple","value":"-1"},"name":"qIndex","label":"qIndex","varType":"script","category":"vaVars"},"c841975739a349f5af02d65c45d0be1a":{"id":"c841975739a349f5af02d65c45d0be1a","name":"submit_producer","label":"Submit Producer","varType":"boolean","category":"vaInputs"},"16562d4ce5fe481c87cf88d18cc5c556":{"id":"16562d4ce5fe481c87cf88d18cc5c556","value":{"mode":"simple","value":"5"},"name":"limit","label":"limit","varType":"script","category":"vaVars"},"2cd3c2046b834ec5a7f2549f50def198":{"id":"2cd3c2046b834ec5a7f2549f50def198","value":{"mode":"simple","value":"0"},"name":"count","label":"count","varType":"script","category":"vaVars"},"266dc0c745be4b33a2f6c2c508f8950d":{"id":"266dc0c745be4b33a2f6c2c508f8950d","value":{"mode":"simple","value":"0"},"name":"index","label":"index","varType":"script","category":"vaVars"},"cbf05d46a7bc4e5e88341a9e58ef86d3":{"id":"cbf05d46a7bc4e5e88341a9e58ef86d3","name":"order_item","label":"Order Item","varType":"boolean","category":"vaInputs"},"fd8950c771344da9bc6ecf42176b33bb":{"id":"fd8950c771344da9bc6ecf42176b33bb","name":"question_date","label":"Question Date","varType":"date_time","category":"vaInputs","mode":"date"},"fbacd63e1b574297a9ef974fc4406b4f":{"id":"fbacd63e1b574297a9ef974fc4406b4f","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"validation_message","label":"validation_message","varType":"script","category":"vaVars"},"c2b03d461bc847b698db334b03ec940b":{"id":"c2b03d461bc847b698db334b03ec940b","name":"question_text","label":"Question Text","varType":"string","category":"vaInputs"},"c3c6071998d24b928bb9bab53a862e3e":{"id":"c3c6071998d24b928bb9bab53a862e3e","name":"question_yesno","label":"Question YesNo","varType":"boolean","category":"vaInputs"},"523a290c0b4a41ed8f638a9b861a741d":{"id":"523a290c0b4a41ed8f638a9b861a741d","name":"question_reference","label":"Question Reference","varType":"reference","table":"","category":"vaInputs"},"6c47c81124d04d2d95284677c6b56b4e":{"category":"vaInputs","id":"6c47c81124d04d2d95284677c6b56b4e","label":"User","name":"user","table":"sys_user","varType":"reference"},"a7efd661d041446aad2c824ce5ed7ab2":{"id":"a7efd661d041446aad2c824ce5ed7ab2","value":{"mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       var result;\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    return '';\n})()\n"},"name":"request_for","label":"request_for","varType":"script","category":"vaVars"},"810d44081284448299bc452f7019d477":{"id":"810d44081284448299bc452f7019d477","name":"question_choice","label":"Question Choice","varType":"reference","table":"","category":"vaInputs"},"83be2864c3424394abf59da4c3575f4d":{"id":"83be2864c3424394abf59da4c3575f4d","name":"question_date_time","label":"Question Date Time","varType":"date_time","category":"vaInputs","mode":"date_time"},"5642abe47e9043f8a95ba103193b877f":{"id":"5642abe47e9043f8a95ba103193b877f","name":"proceed_with_default_value","label":"Proceed With Default Value","varType":"boolean","category":"vaInputs"},"508bf7c3b8a44167970c810aac02b47d":{"id":"508bf7c3b8a44167970c810aac02b47d","name":"question_requested_for","label":"Question Requested For","varType":"reference","table":"","category":"vaInputs"},"755b41f21f8049c0be9dd862fdc8ebc8":{"id":"755b41f21f8049c0be9dd862fdc8ebc8","name":"search_requested_for","label":"Search Requested For","varType":"string","category":"vaInputs"},"1c4624affbf042b4b6e1ecbe63a9c9bf":{"id":"1c4624affbf042b4b6e1ecbe63a9c9bf","value":{"mode":"script","value":"(function execute() {\n    return false;\n})()\n"},"name":"canView","label":"canView","varType":"script","category":"vaVars"},"0ce955283111489bb7b64466efc11574":{"id":"0ce955283111489bb7b64466efc11574","name":"request_for_another_user","label":"Request For Another User","varType":"boolean","category":"vaInputs"},"f0d3429c9704497da63a365564131f4f":{"id":"f0d3429c9704497da63a365564131f4f","value":{"mode":"script","value":"(function execute() {\n    return '7,14,15,17,21,23,25,29,30,32';\n})()\n"},"name":"unsupportedVarTypes","label":"unsupportedVarTypes","varType":"script","category":"vaVars"},"7661f33f602448a199628ce1a2e15a32":{"id":"7661f33f602448a199628ce1a2e15a32","name":"question_email","label":"Question Email","varType":"string","category":"vaInputs"},"6a853e56921a495db0759b588a88433f":{"id":"6a853e56921a495db0759b588a88433f","name":"question_ip_address","label":"Question IP Address","varType":"string","category":"vaInputs"},"181880e85d62463d803afef14fe85dae":{"id":"181880e85d62463d803afef14fe85dae","name":"question_url","label":"Question URL","varType":"string","category":"vaInputs"},"9303dd46fd7d4ca5b46b016f634abecb":{"id":"9303dd46fd7d4ca5b46b016f634abecb","name":"add_attachment","label":"Add Attachment","varType":"boolean","category":"vaInputs"},"9c8b83ffa24b4513a6207547bd521c1e":{"id":"9c8b83ffa24b4513a6207547bd521c1e","name":"upload_attachment","label":"Upload Attachment","varType":"file","category":"vaInputs"},"640cdc88172e495dad449ebbb11ec6f2":{"id":"640cdc88172e495dad449ebbb11ec6f2","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"media_links_form_attachment","label":"media_links_form_attachment","varType":"script","category":"vaVars"},"ffb10952df7d4f29adc0b69320e58663":{"id":"ffb10952df7d4f29adc0b69320e58663","name":"add_more","label":"Add More","varType":"boolean","category":"vaInputs"},"9b244cacd5b448ecac220b3dba13a26b":{"id":"9b244cacd5b448ecac220b3dba13a26b","name":"question_attachment","label":"Question Attachment","varType":"file","category":"vaInputs"},"2058f7313a394f1f94eb7d968897d8c0":{"id":"2058f7313a394f1f94eb7d968897d8c0","name":"execute_contextual_search","label":"Execute_contextual_search","defaultValue":"false","varType":"string","category":"vaInputs"},"2f15de717cb448d3ab3237e9e174a452":{"id":"2f15de717cb448d3ab3237e9e174a452","name":"confirm_catalog_item","label":"Confirm_catalog_item","defaultValue":"true","varType":"string","category":"vaInputs"},"412fb15b7fd141e4ba9ec76cb1b2fd19":{"id":"412fb15b7fd141e4ba9ec76cb1b2fd19","value":{"mode":"script","value":"(function execute() {\n    return '';\n})()\n"},"name":"contextualSearchVariable","label":"contextualSearchVariable","varType":"script","category":"vaVars"},"ceebca1d02c24302b0412d1ffc07a780":{"id":"ceebca1d02c24302b0412d1ffc07a780","value":{"mode":"simple","value":"2821675a5b30130070e4492c11f91a89"},"name":"contextualSearchContext","label":"contextualSearchContext","varType":"script","category":"vaVars"},"5dbe6455279d4270b071deccb9002981":{"id":"5dbe6455279d4270b071deccb9002981","value":{"mode":"simple","value":"3"},"name":"contextualSearchResultLimit","label":"contextualSearchResultLimit","varType":"script","category":"vaVars"},"fa1c0d693b3e42a884a7f1b067ad40d3":{"id":"fa1c0d693b3e42a884a7f1b067ad40d3","value":{"mode":"simple","value":"0"},"name":"contextualSearchIndex","label":"contextualSearchIndex","varType":"script","category":"vaVars"},"69aadfe47f5046438fb0ea6b453f7827":{"id":"69aadfe47f5046438fb0ea6b453f7827","value":{"value":"","mode":"simple"},"name":"contextualSearchResultJsonString","label":"contextualSearchResultJsonString","varType":"script","category":"vaVars"},"be2aae83f28d426cbfc7837b5b16e65a":{"id":"be2aae83f28d426cbfc7837b5b16e65a","value":{"mode":"simple","value":"0"},"name":"contextualSearchResultCount","label":"contextualSearchResultCount","varType":"script","category":"vaVars"},"8c2169ef87774005a60fa8109175cbee":{"id":"8c2169ef87774005a60fa8109175cbee","name":"did_articles_help","label":"Did_articles_help","varType":"boolean","category":"vaInputs"}},"goals":{"primary":{"id":"primary","trigger":{"type":"primary"},"name":"primary","applicability":"","description":"","nodes":{"038fdd71a34340ab81a9913d00551286":{"id":"038fdd71a34340ab81a9913d00551286","stepType":"Start","name":"Start","greetingResponse":{"mode":"simple","value":""},"parameters":[{"name":"catalog_item_id","value":"","id":"1131daa088d44c089a60fded925d24f0","disabled":false,"referenced":true,"checked":true},{"name":"execute_contextual_search","value":"false","id":"2058f7313a394f1f94eb7d968897d8c0","checked":false,"referenced":true,"disabled":false},{"name":"confirm_catalog_item","value":"true","id":"2f15de717cb448d3ab3237e9e174a452","checked":false,"referenced":false,"disabled":false}],"variableIds":["1131daa088d44c089a60fded925d24f0","2058f7313a394f1f94eb7d968897d8c0","2f15de717cb448d3ab3237e9e174a452"]},"6a34e39c5e1845a79efcf76baf10044e":{"id":"6a34e39c5e1845a79efcf76baf10044e","stepType":"TerminateGoal","name":"End","confirmationMessage":{"value":"","mode":"simple"},"outputVariables":[{"key":"record_id","value":"{{vaVars.record_id}}","mode":"simple","disabled":true},{"key":"record_table","value":"{{vaVars.record_table}}","mode":"simple","disabled":true},{"key":"variables","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (!itemJson.variables)\n        return '';\n    var variablesObj = {};\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n    }\n    return JSON.stringify(variablesObj);\n})()\n","mode":"script","disabled":true}]},"ff689f5bfdb3489bafd261f4692681c9":{"id":"ff689f5bfdb3489bafd261f4692681c9","name":"Set Selected Item","script":"(function execute() {\n    var itemId = vaInputs.catalog_item_id.getValue();\n    var itemJSON = new sn_sc.CatalogConversationHelper().getItem(itemId);\n    vaVars.itemJSON = JSON.stringify(itemJSON);\n    vaVars.itemName = itemJSON.name;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"a64d04aea6ab4f07b2d6ce77043bb415":{"id":"a64d04aea6ab4f07b2d6ce77043bb415","stepType":"TextOutput","name":"Item Description","value":{"value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var response = gs.getMessage(\"Here are some more details about {0}\", vaVars.itemName);\n    if (itemJson.description) \n        return response + itemJson.description;\n\n    return gs.getMessage(\"Selected {0}\", vaVars.itemName);\n})()\n","mode":"script"},"applicability":{"value":"","mode":"query"}},"ad91b6b41056401295da325f4ba265bc":{"id":"ad91b6b41056401295da325f4ba265bc","stepType":"Prompt","name":"Proceed","prompt":{"value":"Should I proceed with this?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"829234221c9b4339b5a1d651e52a7eb8","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"3bf11079efbb49ec938d6646bd4c5c92":{"id":"3bf11079efbb49ec938d6646bd4c5c92","stepType":"Decision","name":"Decision"},"d56d26e322d241f39b29e23a90773e99":{"id":"d56d26e322d241f39b29e23a90773e99","stepType":"Decision","name":"Decision"},"f099be30f5764edab20fc53f1cd71bab":{"id":"f099be30f5764edab20fc53f1cd71bab","stepType":"Decision","name":"Decision"},"0277745f7dbf460fb3199451dcadccef":{"id":"0277745f7dbf460fb3199451dcadccef","stepType":"TextOutput","name":"Start Questions","value":{"value":"Alright, now let's select from a few options to finish up your request","mode":"simple"},"applicability":{"value":"","mode":"query"}},"fa311d0758544f6a9671b6000b7099c1":{"id":"fa311d0758544f6a9671b6000b7099c1","stepType":"Decision","name":"Decision"},"f7e8b5a2434d45f7a47fbd954ef730fa":{"id":"f7e8b5a2434d45f7a47fbd954ef730fa","stepType":"Decision","name":"Decision"},"3448582ba24c49d49435ad476a19c4b2":{"id":"3448582ba24c49d49435ad476a19c4b2","stepType":"Prompt","name":"Submit Producer","prompt":{"value":"Alright, I am all set. Do you want me to submit this request?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"c841975739a349f5af02d65c45d0be1a","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"ab71efd4480c44269407192660c182fa":{"id":"ab71efd4480c44269407192660c182fa","stepType":"Decision","name":"Decision"},"2e5375113dce45e8b1e6ddfb53a9cb6b":{"id":"2e5375113dce45e8b1e6ddfb53a9cb6b","name":"Insert the Record","script":"(function execute() {\n   var itemJson = JSON.parse(vaVars.itemJSON);\n    var variablesObj = {};\n    var attachmentIds = [];\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n        if (itemJson.variables[i].type === 33)\n           attachmentIds.push(itemJson.variables[i].value);\n    }\n   var reqObject = {\n       \"sysparm_id\" : itemJson.sys_id,\n       \"sysparm_action\" : 'execute_producer',\n        \"variables\" : variablesObj\n   }\n   var response = new sn_sc.CatItem(itemJson.sys_id).submitProducer(reqObject);\n   if (response) {\n       vaVars.record_id = response.sys_id;\n       vaVars.record_table = response.table;\n       // add attachment to record\n       var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\n       for (var i in mediaLinksFormAttachment)\n           vaSystem.attachToRecord(mediaLinksFormAttachment[i], response.table, response.sys_id);\n\n       // move attachment variable to record\n       var gr = new GlideRecord('sys_attachment');\n       gr.addQuery('sys_id', 'IN' , attachmentIds);\n       gr.query();\n       while (gr.next()) {\n           gr.setValue('table_name', 'ZZ_YY' + response.table);\n           gr.setValue('table_sys_id', response.sys_id);\n           gr.update();\n       }\n   }\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"c3b565ce64bd4a18bbf843605e2f3d9b":{"id":"c3b565ce64bd4a18bbf843605e2f3d9b","stepType":"Prompt","name":"Order Item","prompt":{"value":"Alright, I am all set. Do you want me to submit this request?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"cbf05d46a7bc4e5e88341a9e58ef86d3","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"9915d42fd31649e4a143f39b03402c0b":{"id":"9915d42fd31649e4a143f39b03402c0b","stepType":"Decision","name":"Decision"},"2b3d0d29104440f783b2565443b6d287":{"id":"2b3d0d29104440f783b2565443b6d287","name":"Checkout Cart","script":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var cartname = \"vacart_\" + gs.generateGUID();\n    var cartObj = new sn_sc.CartJS(cartname);\n    cartObj.setRequestedFor(vaVars.request_for);\n\n    var variablesObj = {};\n    var attachmentIds = [];\n    for (i = 0; i &lt; itemJson.variables.length; i++) {\n        variablesObj[itemJson.variables[i].name] = itemJson.variables[i].value;\n        if (itemJson.variables[i].type === 33)\n           attachmentIds.push(itemJson.variables[i].value);\n    }\n        \n\n    var reqObj = {\n        \"sysparm_id\" : itemJson.sys_id,\n        \"variables\" : variablesObj\n    };\n    cartObj.addToCart(reqObj);\n    var requestResponse = cartObj.checkoutCart(true);\n    var requestGr = new GlideRecord('sc_request');\n    if (requestGr.get(requestResponse.request_id)) {\n        var reqItemGr = new GlideRecord('sc_req_item');\n        reqItemGr.addQuery(\"request\", requestResponse.request_id);\n        reqItemGr.query();\n        if (reqItemGr.next()) {\n            vaVars.record_id = reqItemGr.getUniqueValue();\n            vaVars.record_table = 'sc_req_item';\n            // add attachment to record\n            var mediaLinksFormAttachment = vaVars.media_links_form_attachment.split(',');\n            for (var i in mediaLinksFormAttachment)\n                vaSystem.attachToRecord(mediaLinksFormAttachment[i], vaVars.record_table, vaVars.record_id);\n\n        }\n        // move attachment variable to record\n        var gr = new GlideRecord('sys_attachment');\n        gr.addQuery('sys_id', 'IN' , attachmentIds);\n        gr.query();\n        while (gr.next()) {\n            gr.setValue('table_name', 'ZZ_YY' + vaVars.record_table);\n            gr.setValue('table_sys_id', vaVars.record_id);\n            gr.update();\n        }\n    }\n})()","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"74f829c5fa7d40148d7362bbb7f8ec75":{"id":"74f829c5fa7d40148d7362bbb7f8ec75","stepType":"Decision","name":"Decision"},"a291ae1bc6b5466aa5223110b2f1749c":{"id":"a291ae1bc6b5466aa5223110b2f1749c","stepType":"Prompt","name":"Question Date","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"fd8950c771344da9bc6ecf42176b33bb","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"3c418d8557f240a18f0b20e4c44d9f93":{"id":"3c418d8557f240a18f0b20e4c44d9f93","name":"Post Response","script":"(function execute() {\n   var itemJson = JSON.parse(vaVars.itemJSON);\n   vaVars.validation_message = \"\";\n   var quesJson = itemJson.variables[vaVars.qIndex];\n   var type = quesJson.type;\n   switch (type) {\n        case 2:\n        case 6:\n        case 16:\n            var ans = vaInputs.question_text.getValue() || quesJson.display_value;\n            if (ans.trim().length === 0 &amp;&amp; itemJson.variables[vaVars.qIndex].mandatory) {\n                vaVars.validation_message = gs.getMessage('You must answer this question');\n                break;\n            }\n            if (type === 2) {\n                itemJson.variables[vaVars.qIndex].value = ans;\n                break;\n            }\n            var q = GlideappQuestion.getQuestion(itemJson.variables[vaVars.qIndex].sys_id);\n            var validresponse = q.validateRegex(ans);\n            if (validresponse)\n                itemJson.variables[vaVars.qIndex].value = ans;\n            else if (!validresponse)\n                vaVars.validation_message = q.getValidationMessage();\n            break;\n        case 1:\n            var ans = quesJson.value == \"Yes\" ? true : false;\n            var value = vaInputs.question_yesno.getValue();\n            value = value == \"\" ? ans : value;\n            ans = value ? gs.getMessage(\"Yes\") : gs.getMessage(\"No\");\n            itemJson.variables[vaVars.qIndex].value = ans;\n            break;\n        case 9:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date.getDisplayValue() || quesJson.display_value;\n            break;\n        case 10:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_date_time.getDisplayValue() || quesJson.display_value;\n            break;\n        case 8:\n            var ans = quesJson.value;\n            if (vaInputs.question_reference)\n                ans = vaInputs.question_reference.getValue();\n                \n            itemJson.variables[vaVars.qIndex].value = ans;\n            break;\n        case 3:\n        case 4:\n        case 5:\n        case 18:\n        case 22:\n            var ans = quesJson.value;\n            if (vaInputs.question_choice) {\n                ans = vaInputs.question_choice.getValue();\n                ans = ans == 'no_data' ? '' : ans;\n            }\n            itemJson.variables[vaVars.qIndex].value = ans;\n            break;\n        case 26:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_email.getValue() || quesJson.value;\n            break;\n        case 27:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_url.getValue() || quesJson.value;\n            break;\n        case 28:\n            itemJson.variables[vaVars.qIndex].value = vaInputs.question_ip_address.getValue() || quesJson.value\n            break;\n        case 31:\n            var ans = quesJson.default_value + '';\n            if (vaVars.request_for)\n                ans = vaVars.request_for;\n            else\n                vaVars.request_for = ans;\n            itemJson.variables[vaVars.qIndex].value = ans;\n   }\n   if (!vaVars.request_for)\n       vaVars.request_for = gs.getUserID() + '';\n   vaVars.itemJSON = JSON.stringify(itemJson);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"9e00f824a4a549eb86c24ab02e67a01e":{"id":"9e00f824a4a549eb86c24ab02e67a01e","stepType":"Decision","name":"Decision"},"3a4bcb0d90ae446abfdcd1e4ea90e234":{"id":"3a4bcb0d90ae446abfdcd1e4ea90e234","stepType":"ScriptOutput","name":"Validation Message","output_type":"single_part","script":"(function execute() {\n      var singleOutMsg = new sn_cs.SinglePartOutMsg();\n       singleOutMsg.setTextPart(gs.getMessage('{0}. Answer the question again', vaVars.validation_message));\n       return singleOutMsg;\n})()","applicability":{"value":"","mode":"query"}},"5fc50002cef04aa0abb05fe2f7bcab6d":{"id":"5fc50002cef04aa0abb05fe2f7bcab6d","stepType":"Prompt","name":"Question Text","prompt":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"c2b03d461bc847b698db334b03ec940b","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"266f400ce9ad430d99eacd32ea9521fe":{"id":"266f400ce9ad430d99eacd32ea9521fe","stepType":"Prompt","name":"Question YesNo","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"c3c6071998d24b928bb9bab53a862e3e","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"fe0c7acfe48d46dfad930e9d1c7110d5":{"stepType":"ReferenceChoicePrompt","name":"Question Reference","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"523a290c0b4a41ed8f638a9b861a741d","id":"fe0c7acfe48d46dfad930e9d1c7110d5","mode":"external","script":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n    var gr = new GlideRecordSecure(variable.reference);\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(gr.getDisplayName());\n    \n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()","noRecordsResponseMsg":{"value":"No Records Found","mode":"simple"},"condition":{"value":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var variable = itemJson.variables[vaVars.qIndex];\n    var gr = new GlideRecordSecure(variable.reference);\n    gr.addQuery(variable.qualifier);\n    if (variable.ref_ac_order_by)\n        gr.orderBy(variable.ref_ac_order_by);\n    else\n        gr.orderBy(gr.getDisplayName());\n    \n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"}},"19539a8dbb4a4db19fecb54424f80c1b":{"id":"19539a8dbb4a4db19fecb54424f80c1b","stepType":"Decision","name":"Decision"},"e6780cdfc2484d14ab6de79d9aa82c8b":{"id":"e6780cdfc2484d14ab6de79d9aa82c8b","name":"Question Reference Next Page","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"e1f5a60595c443e1a98483a824547384":{"id":"e1f5a60595c443e1a98483a824547384","name":"Question Reference Prev Page","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"18a52238a3634fb7b0bdcd8019a1f82f":{"id":"18a52238a3634fb7b0bdcd8019a1f82f","name":"Set Record ID to -1","script":"(function execute() {\n    vaVars.record_id = \"-1\";\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"1e804ae8a6ca4246a5945f5919fbc26a":{"stepType":"ReferenceChoicePrompt","name":"Question Choice","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"810d44081284448299bc452f7019d477","id":"1e804ae8a6ca4246a5945f5919fbc26a","mode":"external","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var options = [];\n    var count = 0;\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n\n    var choices = quesJson.options;\n    count = choices.length;\n    vaVars.count = count;\n    options = choices.splice(index, limit);\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()\n","noRecordsResponseMsg":{"value":"No records found","mode":"simple"},"condition":{"value":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var options = [];\n    var count = 0;\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n\n    var choices = quesJson.options;\n    count = choices.length;\n    vaVars.count = count;\n    options = choices.splice(index, limit);\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    return options;    \n})()\n","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"}},"c5325e164ab34f7c8bc1db5a899c647f":{"id":"c5325e164ab34f7c8bc1db5a899c647f","stepType":"Decision","name":"Decision"},"dd18d0b0f18c476b91ae787387173096":{"id":"dd18d0b0f18c476b91ae787387173096","name":"Question Choice Next Page","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"e58312f9081a41228129ab7bce91e816":{"id":"e58312f9081a41228129ab7bce91e816","name":"Question Choice Prev Page","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"56931265e8044cf5848d9d92ee4a0f32":{"id":"56931265e8044cf5848d9d92ee4a0f32","stepType":"Prompt","name":"Question Date Time","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"83be2864c3424394abf59da4c3575f4d","skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"inputType":{"format":"Text","script":""}},"ec74e54a8c5e432287c3af11dbd438a1":{"id":"ec74e54a8c5e432287c3af11dbd438a1","stepType":"TextOutput","name":"Question Label","value":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"applicability":{"value":"","mode":"query"}},"c16202e2cdba4309941563cc8d9e6bab":{"id":"c16202e2cdba4309941563cc8d9e6bab","stepType":"TextOutput","name":"Container Start Question","value":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"applicability":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if (quesJson.display_title)\n        return true;\n})()\n"}},"74013942a1144ee9827f8c22264938bf":{"id":"74013942a1144ee9827f8c22264938bf","stepType":"Prompt","name":"Proceed with Default Value","prompt":{"value":"Do you want to change it?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return !!quesJson.display_value;\n})()\n"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"5642abe47e9043f8a95ba103193b877f","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"9c56e8b2c0b84d4095c08001f37fbfa7":{"id":"9c56e8b2c0b84d4095c08001f37fbfa7","stepType":"Decision","name":"Decision"},"65c91b6dbde64dc8be281708b0a74cf3":{"stepType":"ReferenceChoicePrompt","name":"Question Requested For","prompt":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"508bf7c3b8a44167970c810aac02b47d","id":"65c91b6dbde64dc8be281708b0a74cf3","mode":"external","script":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    var gr = new GlideRecordSecure('sys_user');\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\n    gr.addQuery(quesJson.qualifier);\n    gr.orderBy(gr.getDisplayName());\n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    if (count &gt; 0) {\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Someone else')\n        });\n    }\n    return options;    \n})()\n","noRecordsResponseMsg":{"value":"I couldn't find a user with that name","mode":"simple"},"condition":{"value":"(function execute() {\n    var options = [];\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    var gr = new GlideRecordSecure('sys_user');\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    gr.addEncodedQuery('nameLIKE'+ vaInputs.search_requested_for);\n    gr.addQuery(quesJson.qualifier);\n    gr.orderBy(gr.getDisplayName());\n    gr.chooseWindow(index, index + limit, true);\n    gr.query();\n\n    var count = gr.getRowCount();\n    vaVars.count = count;\n\n    while (gr.next()) {\n        options.push({\n            \"value\" : gr.getUniqueValue(),\n            \"label\" : gr.getDisplayValue()\n        });\n    }\n\n    if (index &gt; 0) \n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    if (count &gt; index + limit)\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    \n    if (count &gt; 0) {\n        options.push({\n            'value' : 'search',\n            'label' : gs.getMessage('Someone else')\n        });\n    }\n    return options;    \n})()\n","mode":"external_script"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","skippable":{"value":"","mode":"query"}},"e6c36da73ec4429385a3aaeeda1f8bab":{"id":"e6c36da73ec4429385a3aaeeda1f8bab","stepType":"Prompt","name":"Search Requested For","prompt":{"value":"Who should I set it to? ","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"755b41f21f8049c0be9dd862fdc8ebc8","skippable":{"mode":"query","value":""},"inputType":{"format":"Text","script":""}},"92cb7ad1090948a9895f244abadc3c22":{"id":"92cb7ad1090948a9895f244abadc3c22","stepType":"Decision","name":"Decision"},"87030569c30f437886c4be3ec32e3f90":{"id":"87030569c30f437886c4be3ec32e3f90","name":"Requested For Next Page","script":"(function execute() {\n    var count = parseInt(vaVars.count);\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    if ( index + limit &gt; count )\n        vaVars.index = 0;\n    else\n        vaVars.index = index + limit;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"e3913d1e4e404eaea701c30fd53e5911":{"id":"e3913d1e4e404eaea701c30fd53e5911","name":"Is Delegation Allowed","script":"(function execute() {\n    var item = new sn_sc.CatItem(JSON.parse(vaVars.itemJSON).sys_id);\n    vaVars.request_for = vaInputs.question_requested_for.getValue() + '';\n    vaVars.canView = item.isDelegationAllowed(vaVars.request_for);\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"b0f5e02ae9b7481b8809cda9c3c0c4d7":{"id":"b0f5e02ae9b7481b8809cda9c3c0c4d7","stepType":"Decision","name":"Decision"},"a2303ea58395438e83490fe045507b10":{"id":"a2303ea58395438e83490fe045507b10","name":"Requested For Previous Page","script":"(function execute() {\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var c = index - limit;\n    if ( c &lt; 0 ) c = 0;\n    vaVars.index = c;\n})();","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"4724ac8318294feb8d8967254f41ecfa":{"id":"4724ac8318294feb8d8967254f41ecfa","stepType":"Prompt","name":"Request For Another User","prompt":{"value":"The selected user does not have access to this item. Do you want to request for  someone else?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"optional":false,"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"0ce955283111489bb7b64466efc11574","skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"51d3d10ead994639871f4df252aa391a":{"id":"51d3d10ead994639871f4df252aa391a","stepType":"Decision","name":"Decision"},"f77ff66de81841ada444c5bf39165e37":{"id":"f77ff66de81841ada444c5bf39165e37","stepType":"Decision","name":"Decision"},"b7c4d17f46ba403fbb92b0f0a89db6a7":{"id":"b7c4d17f46ba403fbb92b0f0a89db6a7","name":"Run OnChange Policies","script":"(function execute() {\n   vaVars.itemJSON = JSON.stringify(new sn_sc.CatalogConversationHelper().runChangePolicies(JSON.parse(vaVars.itemJSON)))\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"f3da80ee7d554c57974175419bbdb1fb":{"id":"f3da80ee7d554c57974175419bbdb1fb","stepType":"Prompt","name":"Question Email","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"7661f33f602448a199628ce1a2e15a32","inputType":{"format":"33513d135b1200101f254d3ba881c7d5","script":""}},"6c1832d555f54fb58670edbc88544f61":{"id":"6c1832d555f54fb58670edbc88544f61","stepType":"Prompt","name":"Question IP Address","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"6a853e56921a495db0759b588a88433f","inputType":{"format":"a860c5945b2200101f254d3ba881c7df","script":""}},"4151096450ae441aa10d7d66864a95ee":{"id":"4151096450ae441aa10d7d66864a95ee","stepType":"Prompt","name":"Question URL","prompt":{"value":"(function execute() {\n   var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"181880e85d62463d803afef14fe85dae","inputType":{"format":"77d8b2935b9200101f254d3ba881c7b9","script":""}},"7811e2c230804af9ae12a6237a76d47f":{"id":"7811e2c230804af9ae12a6237a76d47f","stepType":"Decision","name":"Decision"},"f828bdd731ae4d3196f49670d57422ee":{"id":"f828bdd731ae4d3196f49670d57422ee","stepType":"Prompt","name":"Add Attachment","prompt":{"value":"(function execute() {\n    return gs.getMessage('Add attachment?');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return !item.mandatory_attachment;\n})()\n"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"9303dd46fd7d4ca5b46b016f634abecb"},"31d0d50201a94a2592d59694def90149":{"id":"31d0d50201a94a2592d59694def90149","stepType":"Decision","name":"Decision"},"048d05ff93d8485a8c884e4ea24b5b1f":{"id":"048d05ff93d8485a8c884e4ea24b5b1f","stepType":"Prompt","name":"Upload Attachment","prompt":{"value":"(function execute() {\n    return gs.getMessage('Upload attachment');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"9c8b83ffa24b4513a6207547bd521c1e"},"35ba268872b34bf68b968fa1cc201750":{"id":"35ba268872b34bf68b968fa1cc201750","name":"Add Media Links for Form Attachment","script":"(function execute() {\n    if (!!vaVars.media_links_form_attachment)\n        vaVars.media_links_form_attachment = vaVars.media_links_form_attachment + ',' + vaInputs.upload_attachment.getValue();\n    else\n        vaVars.media_links_form_attachment = vaInputs.upload_attachment.getValue();\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"bab76c2aae59460dbea4f41274b34924":{"id":"bab76c2aae59460dbea4f41274b34924","stepType":"Prompt","name":"Add More","prompt":{"value":"(function execute() {\n    return gs.getMessage('Add more?');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"ffb10952df7d4f29adc0b69320e58663"},"64fc395a5afb4acbb90e4d6304be08ad":{"id":"64fc395a5afb4acbb90e4d6304be08ad","stepType":"Decision","name":"Decision"},"78c76edec0de47ffa694924150b4f4d3":{"id":"78c76edec0de47ffa694924150b4f4d3","stepType":"Prompt","name":"Question Attachment","prompt":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return quesJson.label;\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].mandatory;\n})()\n"},"withNluUserInput":false,"skipIfFulfilled":false,"entity":"","variableId":"9b244cacd5b448ecac220b3dba13a26b"},"811bd26ad8614eb98391d2a74b607264":{"id":"811bd26ad8614eb98391d2a74b607264","name":"Validate Attachment","script":"(function execute() {\n    vaVars.validation_message = \"\";\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var quesJson = itemJson.variables[vaVars.qIndex];\n    var vaUtils = new global.VAUtils();\n    var arr = vaInputs.question_attachment.getValue().split('/');\n    var mediaId = arr[arr.length - 1];\n    var gr = new GlideRecord('sys_cs_media');\n    gr.addQuery('media_id', mediaId);\n    gr.query();\n    if (gr.next()) {\n        var attachmentId = gr.getValue('sys_attachment_id');\n        var attachRef = new GlideRecord('sys_attachment');\n        if (attachRef.get(attachmentId)) {\n            var file = {\n                name: attachRef.getValue('file_name'),\n                size: attachRef.getValue('size_bytes')\n            };\n            var allowedExtensions = new Array();\n            if (quesJson.allow_extension)\n               allowedExtensions = quesJson.allow_extension.split(';');\n            var field = {\n                allowedExtensions: allowedExtensions,\n                allowedFileSize: quesJson.max_file_size\n            };\n            var result = vaUtils.validateAttachment(file, field);\n            if (result.type == 'success') {\n                quesJson.value = attachmentId;\n                vaVars.itemJSON = JSON.stringify(itemJson);\n                vaInputs.question_attachment.setValue('');\n            } else\n                vaVars.validation_message = result.message;\n        } else \n            vaVars.validation_message = gs.getMessage('Failed to upload the attachment');\n    } else \n        vaVars.validation_message = gs.getMessage('Failed to upload the attachment');\n})()\n","stepType":"ScriptAction","applicability":{"value":"question_attachmentISNOTEMPTY","mode":"query"}},"c891db6ee0c44c249e0f692d54fa9b74":{"id":"c891db6ee0c44c249e0f692d54fa9b74","stepType":"Decision","name":"Decision"},"6841404d6a594da5bfa7a7bc9745aa3c":{"id":"6841404d6a594da5bfa7a7bc9745aa3c","stepType":"ScriptOutput","name":"Validation Message","output_type":"single_part","script":"(function execute() {\n     var singleOutMsg = new sn_cs.SinglePartOutMsg();\n       singleOutMsg.setTextPart(gs.getMessage('{0}. Answer the question again', vaVars.validation_message));\n       vaVars.validation_message = \"\";\n       return singleOutMsg;\n})()\n","applicability":{"value":"","mode":"query"}},"1c3651c570e74828ba604e273ad854c0":{"id":"1c3651c570e74828ba604e273ad854c0","stepType":"Decision","name":"Is Record Producer"},"d9691260ab7c4719aed0e3b516a91bc8":{"id":"d9691260ab7c4719aed0e3b516a91bc8","stepType":"Decision","name":"Execute Contextual Search"},"96a37c71d8174215838d32fb6bd73640":{"id":"96a37c71d8174215838d32fb6bd73640","name":"Get Search Variable And Context","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    if(gs.nil(vaVars.contextualSearchVariable)) {\n        var searchConfig = contextualSearch.getContextualSearchVariableAndContext(vaInputs.catalog_item_id);\n        vaVars.contextualSearchVariable = searchConfig.searchVariable;\n        vaVars.contextualSearchContext = searchConfig.context;\n    }\n    return;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"6a9f4a1b3b2c4051a8faa3154cc4d14a":{"id":"6a9f4a1b3b2c4051a8faa3154cc4d14a","stepType":"Decision","name":"Contextual Search Variable ?"},"a2f76f8d2e1347e6853ad3523ed5a948":{"id":"a2f76f8d2e1347e6853ad3523ed5a948","name":"Contextual Search","script":"(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    var response = contextualSearch.search(\n        vaVars.contextualSearchContext, vaInputs.question_text.getValue(), ''\n    );\n    var success = contextualSearch.processSearchResponse(response);\n    if (!success) {\n        return;\n    }  \n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 20, -2);\n    vaVars.contextualSearchResultCount = relevantSearchResults.length;\n    vaVars.contextualSearchResultJsonString = JSON.stringify(relevantSearchResults);\n    vaVars.contextualSearchIndex = 0;\n    return;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"65f1995fc7194945aaf5a1295ac1af2a":{"id":"65f1995fc7194945aaf5a1295ac1af2a","stepType":"Decision","name":"Did the search return results ?"},"d4816f4c699d42bf882185ae591010b7":{"id":"d4816f4c699d42bf882185ae591010b7","stepType":"LinkOutput","name":"Display multi-link","url":{"mode":"simple","value":""},"label":{"mode":"simple","value":""},"header":{"mode":"simple","value":""},"applicability":{"value":"","mode":"query"},"linkType":"multiple","introMsg":{"value":"I found some information that might help you:","mode":"simple"},"listOfLinks":"(function execute(header) {\n\tvar contextualSearch = new global.VAGlobalContextualSearchUtil();\n\tvar variables = {\n\t\tlimit: vaVars.contextualSearchResultLimit,\n\t\tindex: vaVars.contextualSearchIndex,\n\t\tsearch_result_json_string: vaVars.contextualSearchResultJsonString,\n\t\tportal: ''\n\t}\n\tvar groupedLinksOutMsg = contextualSearch.getLinks(header, variables);\n\treturn groupedLinksOutMsg;\n})(header)\n"},"4547fbfa0d1145a58f0f624930070ad3":{"id":"4547fbfa0d1145a58f0f624930070ad3","stepType":"Decision","name":"Did Articles Help ?"},"94be6bf8aa7249119803f63f4c943b61":{"id":"94be6bf8aa7249119803f63f4c943b61","stepType":"Prompt","name":"Did Articles Help","prompt":{"value":"Did any of this information resolve your issue?","mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"variableId":"8c2169ef87774005a60fa8109175cbee"},"3a50f996b0564424860c134c912f188f":{"id":"3a50f996b0564424860c134c912f188f","stepType":"Decision","name":"Confirmation Required ?"},"43ccf5aca87c48f1a7eec48706419084":{"id":"43ccf5aca87c48f1a7eec48706419084","stepType":"TextOutput","name":"Requested For Value Acknowledge Message","value":{"value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return !quesJson.display_value ? quesJson.label : quesJson.label + '\\n' + quesJson.display_value;\n})()\n","mode":"script"},"applicability":{"mode":"query","value":""}}},"edges":[{"id":"7c58911665ca42e0907402b630faffd6","edgeType":"Edge","source":"43ccf5aca87c48f1a7eec48706419084","target":"74013942a1144ee9827f8c22264938bf","sourcePort":"","targetPort":""},{"id":"3e8c6b9db25949fab2673d0959a55218","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"43ccf5aca87c48f1a7eec48706419084","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if (JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 31)\n        return true;\n})()\n"},"label":"Question Requested For"},{"id":"6c3604f5230846aca6acddd769f3b624","edgeType":"Edge","source":"78c76edec0de47ffa694924150b4f4d3","target":"811bd26ad8614eb98391d2a74b607264","sourcePort":"","targetPort":""},{"id":"696eb1ef41a34fcda3e48066cd8ae6a2","edgeType":"Edge","source":"35ba268872b34bf68b968fa1cc201750","target":"bab76c2aae59460dbea4f41274b34924","sourcePort":"","targetPort":""},{"id":"e80af80bdf2b459abe946d04af18b08f","edgeType":"Branch","source":"92cb7ad1090948a9895f244abadc3c22","target":"87030569c30f437886c4be3ec32e3f90","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_requested_for.getValue() === 'next';\n})()\n"},"label":"Requested For Next"},{"id":"2e63cf34b9734f069ab25b883011482d","edgeType":"Branch","source":"f7e8b5a2434d45f7a47fbd954ef730fa","target":"c3b565ce64bd4a18bbf843605e2f3d9b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name !== 'sc_cat_item_producer')\n        return true;\nreturn false;\n})()\n"},"label":"Catalog Item"},{"id":"0c93b554c2b44c0eb469c92ce6ac6845","edgeType":"Branch","source":"c5325e164ab34f7c8bc1db5a899c647f","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_choice.getValue();\n    var condition = valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev';\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})();"},"label":"Question Choice Chosen"},{"id":"409a82a8814745f4b0ee2adb846a1e46","edgeType":"Edge","source":"038fdd71a34340ab81a9913d00551286","target":"ff689f5bfdb3489bafd261f4692681c9","sourcePort":"","targetPort":""},{"id":"d8bbb8ac90f74659adfd273baf5b98b7","edgeType":"Edge","source":"a64d04aea6ab4f07b2d6ce77043bb415","target":"ad91b6b41056401295da325f4ba265bc","sourcePort":"","targetPort":""},{"id":"bbc837badedb4cd4af419255e593f2f3","edgeType":"Edge","source":"ad91b6b41056401295da325f4ba265bc","target":"3bf11079efbb49ec938d6646bd4c5c92","sourcePort":"","targetPort":""},{"id":"bb35aaf400104c51b62c0b1af0dd046f","edgeType":"Branch","source":"3bf11079efbb49ec938d6646bd4c5c92","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":"","expression":{"value":"proceed=false","mode":"query"},"label":"No"},{"id":"3e18a21869964474b927c8b9f0cd83d0","edgeType":"Branch","source":"3bf11079efbb49ec938d6646bd4c5c92","target":"d56d26e322d241f39b29e23a90773e99","sourcePort":"","targetPort":"","expression":{"value":"proceed=true","mode":"query"},"label":"Yes"},{"id":"fcacc77cee044b698ac784bbaed2d093","edgeType":"Branch","source":"d56d26e322d241f39b29e23a90773e99","target":"f099be30f5764edab20fc53f1cd71bab","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).va_support;\n})()"},"label":"Has VA Support"},{"id":"dad791aac2a8426ab710285815c257d6","edgeType":"Branch","source":"f099be30f5764edab20fc53f1cd71bab","target":"fa311d0758544f6a9671b6000b7099c1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return false;\n    }\n    //No variables that we can show\n    return true;\n})()\n"},"label":"Item with no variables"},{"id":"baacb44a3dbb40008b8718ca4cbd3d0e","edgeType":"Branch","source":"f099be30f5764edab20fc53f1cd71bab","target":"0277745f7dbf460fb3199451dcadccef","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n\n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return true;\n    }\n    //No variables  that we can show\n    return false;\n})()\n"},"label":"Item with variables"},{"id":"407ba095cbb44c33b7816ae5477acf00","edgeType":"Edge","source":"0277745f7dbf460fb3199451dcadccef","target":"fa311d0758544f6a9671b6000b7099c1","sourcePort":"","targetPort":""},{"id":"38bb7dcabe1c46ad97438ec5ab38d8cd","edgeType":"Branch","source":"f7e8b5a2434d45f7a47fbd954ef730fa","target":"3448582ba24c49d49435ad476a19c4b2","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name === 'sc_cat_item_producer')\n        return true;\nreturn false;\n})()\n"},"label":"Record Producer"},{"id":"3ef3d3ec6d0642e1b42e8e82b1df071c","edgeType":"Edge","source":"3448582ba24c49d49435ad476a19c4b2","target":"ab71efd4480c44269407192660c182fa","sourcePort":"","targetPort":""},{"id":"47170baaac1645ad9542e1e1b37f60e1","edgeType":"Branch","source":"ab71efd4480c44269407192660c182fa","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":"","expression":{"value":"submit_producer=","mode":"query"},"label":"Don't Submit"},{"id":"a06169565da9452480c28a57bc67b3d0","edgeType":"Branch","source":"ab71efd4480c44269407192660c182fa","target":"2e5375113dce45e8b1e6ddfb53a9cb6b","sourcePort":"","targetPort":"","expression":{"value":"submit_producer=true","mode":"query"},"label":"Submit Now"},{"id":"69e1e06ebd414e82a779927ddd430f80","edgeType":"Edge","source":"2e5375113dce45e8b1e6ddfb53a9cb6b","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":""},{"id":"8198a6261ae74202bf807bc03eccb792","edgeType":"Edge","source":"c3b565ce64bd4a18bbf843605e2f3d9b","target":"9915d42fd31649e4a143f39b03402c0b","sourcePort":"","targetPort":""},{"id":"42d91a4554794d219d8a8c374363dc54","edgeType":"Branch","source":"9915d42fd31649e4a143f39b03402c0b","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":"","expression":{"value":"order_item=","mode":"query"},"label":"Don't Order"},{"id":"e7883d8f5d42428ea62784f5c8737b48","edgeType":"Branch","source":"9915d42fd31649e4a143f39b03402c0b","target":"2b3d0d29104440f783b2565443b6d287","sourcePort":"","targetPort":"","expression":{"value":"order_item=true","mode":"query"},"label":"Order Now"},{"id":"e791d79d50004b93add7aba88b9a7110","edgeType":"Edge","source":"2b3d0d29104440f783b2565443b6d287","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":""},{"id":"0c296eda689c4f09ba3333a1593dfcbe","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"a291ae1bc6b5466aa5223110b2f1749c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 9;\n})()\n"},"label":"Date Question"},{"id":"8017c22b773f48a09f3cd9c5158f6f50","edgeType":"Edge","source":"a291ae1bc6b5466aa5223110b2f1749c","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"fa5f0db3b5d24505bd04e339974509fc","edgeType":"Edge","source":"3c418d8557f240a18f0b20e4c44d9f93","target":"9e00f824a4a549eb86c24ab02e67a01e","sourcePort":"","targetPort":""},{"id":"a74b7091aaa94500bbb62ae5fcbfbda6","edgeType":"Branch","source":"9e00f824a4a549eb86c24ab02e67a01e","target":"3a4bcb0d90ae446abfdcd1e4ea90e234","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length !== 0;\n})()\n"},"label":"Repeat Question"},{"id":"f178f18e588c4492a12cec40e3c964a1","edgeType":"Edge","source":"3a4bcb0d90ae446abfdcd1e4ea90e234","target":"5fc50002cef04aa0abb05fe2f7bcab6d","sourcePort":"","targetPort":""},{"id":"fe203ad7400c497f98bb10b8fcc5bd83","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"5fc50002cef04aa0abb05fe2f7bcab6d","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    return type === 2 || type === 6 || type === 16;\n})()"},"label":"Text Type Question"},{"id":"f7f99c9e3e2045178df5cced12e08796","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"266f400ce9ad430d99eacd32ea9521fe","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 1;\n})()"},"label":"Yes or No Question"},{"id":"579a3eecb4e6429cab08042ea49ca80b","edgeType":"Edge","source":"266f400ce9ad430d99eacd32ea9521fe","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"7ad145bed1944d7da3fe4a3ec40800a4","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"fe0c7acfe48d46dfad930e9d1c7110d5","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 8;\n})()"},"label":"Reference Question"},{"id":"fa0da35914e84ad8b26e0e03db9af285","edgeType":"Edge","source":"fe0c7acfe48d46dfad930e9d1c7110d5","target":"19539a8dbb4a4db19fecb54424f80c1b","sourcePort":"","targetPort":""},{"id":"773fb15e0f6c4d6bbb11b948cfda5382","edgeType":"Branch","source":"19539a8dbb4a4db19fecb54424f80c1b","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_reference.getValue();\n    var condition = valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev';\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})();"},"label":"Question Reference Chosen"},{"id":"8530b1c9b8ee4d2b9656d02b60722c05","edgeType":"Branch","source":"19539a8dbb4a4db19fecb54424f80c1b","target":"e6780cdfc2484d14ab6de79d9aa82c8b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_reference.getValue() === 'next';\n})()\n"},"label":"Question Reference Next"},{"id":"0f7bf5b621be46afbee712fab7cfb5a7","edgeType":"Edge","source":"e6780cdfc2484d14ab6de79d9aa82c8b","target":"fe0c7acfe48d46dfad930e9d1c7110d5","sourcePort":"","targetPort":""},{"id":"6a63ad320f6842e3a73fc0e2a8f44108","edgeType":"Branch","source":"19539a8dbb4a4db19fecb54424f80c1b","target":"e1f5a60595c443e1a98483a824547384","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_reference.getValue() === 'prev';\n})()\n"},"label":"Question Refrence Prev"},{"id":"3653a35d5a244ab4b2f8f0cc31e8cad3","edgeType":"Edge","source":"e1f5a60595c443e1a98483a824547384","target":"fe0c7acfe48d46dfad930e9d1c7110d5","sourcePort":"","targetPort":""},{"id":"ee127bc73af145879b47d5a029464c48","edgeType":"Branch","source":"d56d26e322d241f39b29e23a90773e99","target":"18a52238a3634fb7b0bdcd8019a1f82f","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !JSON.parse(vaVars.itemJSON).va_support;\n})()"},"label":"No VA Support"},{"id":"e3362d7ed3ac43d284bdee4a5893f9a6","edgeType":"Edge","source":"18a52238a3634fb7b0bdcd8019a1f82f","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":""},{"id":"811fe1c460d94d8481fc6d2c134e9649","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"1e804ae8a6ca4246a5945f5919fbc26a","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    return type === 3 || type === 4 || type === 5 || type === 18 || type === 22;\n})()\n"},"label":"Choice Question"},{"id":"9de4a52b7ca44dd686e351696df20cb8","edgeType":"Edge","source":"1e804ae8a6ca4246a5945f5919fbc26a","target":"c5325e164ab34f7c8bc1db5a899c647f","sourcePort":"","targetPort":""},{"id":"9e6270cf2b2c47e7a53bd2f858067945","edgeType":"Branch","source":"c5325e164ab34f7c8bc1db5a899c647f","target":"dd18d0b0f18c476b91ae787387173096","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_choice.getValue() === 'next';\n})()\n"},"label":"Question Choice Next"},{"id":"bb53d92f51004e30a51262de0f691fa5","edgeType":"Edge","source":"dd18d0b0f18c476b91ae787387173096","target":"1e804ae8a6ca4246a5945f5919fbc26a","sourcePort":"","targetPort":""},{"id":"9579c9855da548c5a1f3f02312f1bc20","edgeType":"Branch","source":"c5325e164ab34f7c8bc1db5a899c647f","target":"e58312f9081a41228129ab7bce91e816","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_choice.getValue() === 'prev';\n})()\n"},"label":"Question Choice Prev"},{"id":"bd1aaf2786fc4357b361e9ff74712b94","edgeType":"Edge","source":"e58312f9081a41228129ab7bce91e816","target":"1e804ae8a6ca4246a5945f5919fbc26a","sourcePort":"","targetPort":""},{"id":"b1c8ef7fe40d4b538a785a1058b89bff","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"56931265e8044cf5848d9d92ee4a0f32","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 10;\n})()\n"},"label":"Date-Time Question"},{"id":"78c456ed3d344e528cc67ddedad903de","edgeType":"Edge","source":"56931265e8044cf5848d9d92ee4a0f32","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"13a88d2cb79640209e6f8b043a1b05c9","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"ec74e54a8c5e432287c3af11dbd438a1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 11;\n})()"},"label":"Question Label"},{"id":"dee4710cd956486a8acc21a73cbb8e2f","edgeType":"Edge","source":"ec74e54a8c5e432287c3af11dbd438a1","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"6a4d1c3d24f0483da2c15daf8f60029a","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"c16202e2cdba4309941563cc8d9e6bab","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var type = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type;\n    if (type === 0 || type === 12 || type === 19 || type === 20 || type === 24)\n        return true;\n})()\n"},"label":"Container Or Break Questions"},{"id":"b6c6c95da8df4064a11981567d2b743b","edgeType":"Edge","source":"c16202e2cdba4309941563cc8d9e6bab","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"baf020cf354f433c91f90f5bdf14d684","edgeType":"Edge","source":"74013942a1144ee9827f8c22264938bf","target":"9c56e8b2c0b84d4095c08001f37fbfa7","sourcePort":"","targetPort":""},{"id":"dbefbf0e2bdb4b529e3a5231e41774ae","edgeType":"Branch","source":"9c56e8b2c0b84d4095c08001f37fbfa7","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return !!quesJson.display_value &amp;&amp; !vaInputs.proceed_with_default_value.getValue();\n})()"},"label":"Proceed with order"},{"id":"cb0892775e8442bca0e3e472e2539f90","edgeType":"Branch","source":"9c56e8b2c0b84d4095c08001f37fbfa7","target":"e6c36da73ec4429385a3aaeeda1f8bab","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    return !quesJson.display_value || vaInputs.proceed_with_default_value.getValue();\n})()"},"label":"Change Requested For"},{"id":"82ce0eb3363d40519075323289456bb0","edgeType":"Edge","source":"e6c36da73ec4429385a3aaeeda1f8bab","target":"65c91b6dbde64dc8be281708b0a74cf3","sourcePort":"","targetPort":""},{"id":"724b3eefa4ec4c73b462528b4b25a29d","edgeType":"Edge","source":"65c91b6dbde64dc8be281708b0a74cf3","target":"92cb7ad1090948a9895f244abadc3c22","sourcePort":"","targetPort":""},{"id":"20a8057e52654c7785d247da391f861a","edgeType":"Edge","source":"87030569c30f437886c4be3ec32e3f90","target":"65c91b6dbde64dc8be281708b0a74cf3","sourcePort":"","targetPort":""},{"id":"7ca36c282c5d4b6486bb87fc1cc60c6f","edgeType":"Branch","source":"92cb7ad1090948a9895f244abadc3c22","target":"e6c36da73ec4429385a3aaeeda1f8bab","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !vaInputs.question_requested_for.getValue() || vaInputs.question_requested_for.getValue() === 'search';\n})()\n"},"label":"Search Requested For"},{"id":"e0af023b0a994067b50dd434cf2a16f7","edgeType":"Branch","source":"92cb7ad1090948a9895f244abadc3c22","target":"e3913d1e4e404eaea701c30fd53e5911","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var valuePicked = vaInputs.question_requested_for.getValue();\n    var condition = valuePicked !== 'next' &amp;&amp; valuePicked !== 'prev';\n    if (condition) {\n        vaVars.count = 0;\n        vaVars.index = 0;\n    }\n    return condition;\n})();"},"label":"Requested For Chosen"},{"id":"b65453189cb340c4b52ebab56398522b","edgeType":"Edge","source":"e3913d1e4e404eaea701c30fd53e5911","target":"b0f5e02ae9b7481b8809cda9c3c0c4d7","sourcePort":"","targetPort":""},{"id":"bfdcabe57aa94bb0b8c461b05fcde513","edgeType":"Branch","source":"b0f5e02ae9b7481b8809cda9c3c0c4d7","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.canView;\n})()\n"},"label":"Can View"},{"id":"4b243619e28d44e39c41591434db6af6","edgeType":"Branch","source":"92cb7ad1090948a9895f244abadc3c22","target":"a2303ea58395438e83490fe045507b10","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaInputs.question_requested_for.getValue() === 'prev';\n})()\n"},"label":"Requested For Prev"},{"id":"b8a095b4b6424f4fabe7c68df49c83c4","edgeType":"Edge","source":"a2303ea58395438e83490fe045507b10","target":"65c91b6dbde64dc8be281708b0a74cf3","sourcePort":"","targetPort":""},{"id":"3fbb7a752c224479b914c344712941e6","edgeType":"Branch","source":"b0f5e02ae9b7481b8809cda9c3c0c4d7","target":"4724ac8318294feb8d8967254f41ecfa","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return !vaVars.canView\n})()\n"},"label":"Cannot View"},{"id":"5bbaf834ad064474be52cc0032af3d3a","edgeType":"Edge","source":"4724ac8318294feb8d8967254f41ecfa","target":"51d3d10ead994639871f4df252aa391a","sourcePort":"","targetPort":""},{"id":"0d7086192ff847baae7e6f2d264d66ad","edgeType":"Branch","source":"51d3d10ead994639871f4df252aa391a","target":"e6c36da73ec4429385a3aaeeda1f8bab","sourcePort":"","targetPort":"","expression":{"value":"request_for_another_user=true","mode":"query"},"label":"Request for Another User"},{"id":"0c1927e306f94a85af1618d936f22ae7","edgeType":"Branch","source":"51d3d10ead994639871f4df252aa391a","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":"","expression":{"value":"request_for_another_user=","mode":"query"},"label":"End Conversation"},{"id":"4fd174fe5fed430eb9d585d8af904bb4","edgeType":"Branch","source":"9e00f824a4a549eb86c24ab02e67a01e","target":"f77ff66de81841ada444c5bf39165e37","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length === 0;\n})()\n"},"label":"Next Question"},{"id":"7d78dd6730ab4322ac31a88c2389e706","edgeType":"Branch","source":"f77ff66de81841ada444c5bf39165e37","target":"fa311d0758544f6a9671b6000b7099c1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return !JSON.parse(vaVars.itemJSON).has_on_change_policies;\n})()\n"},"label":"No onChange Policies"},{"id":"789ed9620b1f4e37a65240e9bc2b24c5","edgeType":"Branch","source":"f77ff66de81841ada444c5bf39165e37","target":"b7c4d17f46ba403fbb92b0f0a89db6a7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n   return JSON.parse(vaVars.itemJSON).has_on_change_policies;\n})()\n"},"label":"Has onChange Policies"},{"id":"9aa810ed496e4262987dae3dd5bfc888","edgeType":"Edge","source":"b7c4d17f46ba403fbb92b0f0a89db6a7","target":"fa311d0758544f6a9671b6000b7099c1","sourcePort":"","targetPort":""},{"id":"79ab668fa7d744b4a82846f5280d6d25","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var unSupportedTypes = vaVars.unsupportedVarTypes.split(',');\n   return unSupportedTypes.indexOf(String(JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type)) !== -1;\n})()\n"},"label":"Unsupported  Variable  Types"},{"id":"0dd9a7e8d9c0417cab085bae818e5165","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"f3da80ee7d554c57974175419bbdb1fb","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 26;\n})()\n"},"label":"Email Question"},{"id":"07c607a142334b38a5e695a1729eeef7","edgeType":"Edge","source":"f3da80ee7d554c57974175419bbdb1fb","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"cf2e6e3192654769be768376871edf49","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"6c1832d555f54fb58670edbc88544f61","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 28;\n})()\n"},"label":"Ip Address Question"},{"id":"18bf90fe0b2f45ffbe488fb78ad625c6","edgeType":"Edge","source":"6c1832d555f54fb58670edbc88544f61","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"8c6965cae041445db21d26c37ccab1bf","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"4151096450ae441aa10d7d66864a95ee","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 27;\n})()\n"},"label":"URL Question"},{"id":"20793aaadac74771b17998898d7fd143","edgeType":"Edge","source":"4151096450ae441aa10d7d66864a95ee","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":""},{"id":"137f67f096d144ba970055c6a8e3345a","edgeType":"Branch","source":"fa311d0758544f6a9671b6000b7099c1","target":"7811e2c230804af9ae12a6237a76d47f","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n    do{\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n       //There are variables that we can show\n        return false;\n    }\n    //No variables that we can show\n    return true;\n})()"},"label":"Questions Done"},{"id":"9315b3dd60ff4bdaad9e9cb69b9fba32","edgeType":"Branch","source":"7811e2c230804af9ae12a6237a76d47f","target":"f7e8b5a2434d45f7a47fbd954ef730fa","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.no_attachments === true;\n})()\n"},"label":"Has  No Attachment"},{"id":"4ef5a4643b734b3ea3aed3e0b7a638f1","edgeType":"Branch","source":"7811e2c230804af9ae12a6237a76d47f","target":"f828bdd731ae4d3196f49670d57422ee","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.no_attachments === false;\n})()\n"},"label":"Has Attachment"},{"id":"03a6fa01725348bcab49dd597b6d1765","edgeType":"Edge","source":"f828bdd731ae4d3196f49670d57422ee","target":"31d0d50201a94a2592d59694def90149","sourcePort":"","targetPort":""},{"id":"fa13fe7b7db54ffba9e4e49f0e231cb0","edgeType":"Branch","source":"31d0d50201a94a2592d59694def90149","target":"f7e8b5a2434d45f7a47fbd954ef730fa","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return !item.mandatory_attachment &amp;&amp; !vaInputs.add_attachment.getValue();\n})()\n"},"label":"No"},{"id":"a4c42ba796c54e34afd76eebc903463c","edgeType":"Branch","source":"31d0d50201a94a2592d59694def90149","target":"048d05ff93d8485a8c884e4ea24b5b1f","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var item = JSON.parse(vaVars.itemJSON);\n    return item.mandatory_attachment || vaInputs.add_attachment.getValue();\n})()\n"},"label":"Yes"},{"id":"2d2360ff9c444330b63eb0a79c62774d","edgeType":"Edge","source":"048d05ff93d8485a8c884e4ea24b5b1f","target":"35ba268872b34bf68b968fa1cc201750","sourcePort":"","targetPort":""},{"id":"341add08eb9448e6a324a54ba49245c8","edgeType":"Edge","source":"bab76c2aae59460dbea4f41274b34924","target":"64fc395a5afb4acbb90e4d6304be08ad","sourcePort":"","targetPort":""},{"id":"e8578bcb9397408ca548310106e8eac3","edgeType":"Branch","source":"64fc395a5afb4acbb90e4d6304be08ad","target":"048d05ff93d8485a8c884e4ea24b5b1f","sourcePort":"","targetPort":"","expression":{"value":"add_more=true","mode":"query"},"label":"Yes"},{"id":"4caccd8c5d334df3adf38c059950ce06","edgeType":"Branch","source":"64fc395a5afb4acbb90e4d6304be08ad","target":"f7e8b5a2434d45f7a47fbd954ef730fa","sourcePort":"","targetPort":"","expression":{"value":"add_more=","mode":"query"},"label":"No"},{"id":"1be422c3fdbf4db39e20c1647cad9128","edgeType":"Branch","source":"74f829c5fa7d40148d7362bbb7f8ec75","target":"78c76edec0de47ffa694924150b4f4d3","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex].type === 33;\n})()\n"},"label":"Question Attachment"},{"id":"ab788b4f9bf14e98b25a722762f853d5","edgeType":"Edge","source":"811bd26ad8614eb98391d2a74b607264","target":"c891db6ee0c44c249e0f692d54fa9b74","sourcePort":"","targetPort":""},{"id":"61bf423f55af43f4a874188075051fa5","edgeType":"Branch","source":"c891db6ee0c44c249e0f692d54fa9b74","target":"f77ff66de81841ada444c5bf39165e37","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length === 0;\n})()\n"},"label":"Next Question"},{"id":"fe3523ee0c574c35ad95ec5a6458a5f2","edgeType":"Branch","source":"c891db6ee0c44c249e0f692d54fa9b74","target":"6841404d6a594da5bfa7a7bc9745aa3c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.validation_message.length !== 0;\n})()\n"},"label":"Repeat Question"},{"id":"9b102188760445e096de7db09f17f4bc","edgeType":"Edge","source":"6841404d6a594da5bfa7a7bc9745aa3c","target":"78c76edec0de47ffa694924150b4f4d3","sourcePort":"","targetPort":""},{"id":"2499c0495ef74d73ad9b57c40a7103a4","edgeType":"Edge","source":"5fc50002cef04aa0abb05fe2f7bcab6d","target":"1c3651c570e74828ba604e273ad854c0","sourcePort":"","targetPort":""},{"id":"3aa1fc4a831b4d99b4fbeb1066ab6648","edgeType":"Branch","source":"1c3651c570e74828ba604e273ad854c0","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n   \n    if (itemJson.sys_class_name !== 'sc_cat_item_producer') {\n        return true;\n    }    \n    return false;\n})()\n"},"label":"No"},{"id":"7e831945a2c54cbd9673df179d33b173","edgeType":"Branch","source":"1c3651c570e74828ba604e273ad854c0","target":"d9691260ab7c4719aed0e3b516a91bc8","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var itemJson = JSON.parse(vaVars.itemJSON);\n    if (itemJson.sys_class_name === 'sc_cat_item_producer') {\n        return true;\n    }    \n    return false;\n})()"},"label":"Yes"},{"id":"e911f9877040426685b7524c2803d648","edgeType":"Branch","source":"d9691260ab7c4719aed0e3b516a91bc8","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /**\n     * Topic should pass execute_contextual_search as input if contextual search is required\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\n     */\n    var ans = vaInputs.question_text.getValue();\n    if(vaInputs.execute_contextual_search == 'false' || ans.trim().length === 0) {\n        return true;\n    }\n    return false;    \n})()\n"},"label":"No","fromNode":"- Execute Contextual Search","toNode":"3c418d8557f240a18f0b20e4c44d9f93","toEdge":"e911f9877040426685b7524c2803d648","addNode":{},"nodeEntries":{}},{"id":"42d49cfc91a647299c594cb2ce70039d","edgeType":"Branch","source":"d9691260ab7c4719aed0e3b516a91bc8","target":"96a37c71d8174215838d32fb6bd73640","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /**\n     * Topic should pass execute_contextual_search as input if contextual search is required\n     *  It will execute contextual search only first time. For subsequent text variables, it will be skipped\n     */\n    var ans = vaInputs.question_text.getValue();\n    if(vaInputs.execute_contextual_search == 'true'  &amp;&amp; ans.trim().length !== 0) {\n        return true;\n    }\n    return false;     \n})()\n"},"label":"Yes"},{"id":"21b3a6f94ed8478eaadf4768f9ccf69a","edgeType":"Edge","source":"96a37c71d8174215838d32fb6bd73640","target":"6a9f4a1b3b2c4051a8faa3154cc4d14a","sourcePort":"","targetPort":""},{"id":"39d016234acc4b4e9c7281f3ca3eba76","edgeType":"Branch","source":"6a9f4a1b3b2c4051a8faa3154cc4d14a","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if(vaVars.contextualSearchVariable !== quesJson.sys_id) {\n        return true;\n    }\n    return false;\n})()"},"label":"No","fromNode":"- Contextual Search Variable ?","toNode":"3c418d8557f240a18f0b20e4c44d9f93","toEdge":"39d016234acc4b4e9c7281f3ca3eba76","addNode":{},"nodeEntries":{}},{"id":"b0d23db53c9e422abb0414e298c1f656","edgeType":"Branch","source":"6a9f4a1b3b2c4051a8faa3154cc4d14a","target":"a2f76f8d2e1347e6853ad3523ed5a948","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    var quesJson = JSON.parse(vaVars.itemJSON).variables[vaVars.qIndex];\n    if(vaVars.contextualSearchVariable === quesJson.sys_id) {\n        return true;\n    }\n    return false;\n})()"},"label":"Yes"},{"id":"12b85d1eca574b3c88df65996f26ee96","edgeType":"Edge","source":"a2f76f8d2e1347e6853ad3523ed5a948","target":"65f1995fc7194945aaf5a1295ac1af2a","sourcePort":"","targetPort":""},{"id":"0dc833f7988342f2a162fcea0e176549","edgeType":"Branch","source":"65f1995fc7194945aaf5a1295ac1af2a","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if(vaVars.contextualSearchResultCount &lt;= 0){\n        return true;\n    }\n    return false;\n})()\n"},"label":"No","fromNode":"- Did the search return results ?","toNode":"3c418d8557f240a18f0b20e4c44d9f93","toEdge":"0dc833f7988342f2a162fcea0e176549","addNode":{},"nodeEntries":{}},{"id":"623bdda65a494d58a99f969ea196bdfa","edgeType":"Branch","source":"65f1995fc7194945aaf5a1295ac1af2a","target":"d4816f4c699d42bf882185ae591010b7","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    if(vaVars.contextualSearchResultCount &gt; 0){\n        return true;\n    }\n    return false;\n})()\n"},"label":"Yes"},{"id":"b37e596ea9c3496a9eb02a021a337842","edgeType":"Branch","source":"4547fbfa0d1145a58f0f624930070ad3","target":"6a34e39c5e1845a79efcf76baf10044e","sourcePort":"","targetPort":"","expression":{"value":"did_articles_help=true","mode":"query"},"label":"Yes"},{"id":"30c399c07b594885842247a687b560c3","edgeType":"Branch","source":"4547fbfa0d1145a58f0f624930070ad3","target":"3c418d8557f240a18f0b20e4c44d9f93","sourcePort":"","targetPort":"","expression":{"value":"did_articles_help!=true","mode":"query"},"label":"No","fromNode":"- Decision","toNode":"3c418d8557f240a18f0b20e4c44d9f93","toEdge":"30c399c07b594885842247a687b560c3","addNode":{},"nodeEntries":{}},{"id":"e3f3d5eb0c894b428d21bf13ed7bdb1a","edgeType":"Edge","source":"d4816f4c699d42bf882185ae591010b7","target":"94be6bf8aa7249119803f63f4c943b61","sourcePort":"","targetPort":""},{"id":"7c5fc3fd73714c2ca64d64faa5b6c7e6","edgeType":"Edge","source":"94be6bf8aa7249119803f63f4c943b61","target":"4547fbfa0d1145a58f0f624930070ad3","sourcePort":"","targetPort":""},{"id":"0b4ffcefcdc4450da9fab3c438ae288a","edgeType":"Edge","source":"ff689f5bfdb3489bafd261f4692681c9","target":"3a50f996b0564424860c134c912f188f","sourcePort":"","targetPort":""},{"id":"56a9a28585b4418bb5fcb449e21fe7a3","edgeType":"Branch","source":"3a50f996b0564424860c134c912f188f","target":"a64d04aea6ab4f07b2d6ce77043bb415","sourcePort":"","targetPort":"","expression":{"value":"confirm_catalog_item=true","mode":"query"},"label":"Yes"},{"id":"31374a7c2353455eb9367de01e4a1964","edgeType":"Branch","source":"3a50f996b0564424860c134c912f188f","target":"fa311d0758544f6a9671b6000b7099c1","sourcePort":"","targetPort":"","expression":{"value":"confirm_catalog_item=false","mode":"query"},"label":"No","fromNode":"- Confirmation Required ?","toNode":"fa311d0758544f6a9671b6000b7099c1","toEdge":"31374a7c2353455eb9367de01e4a1964","addNode":{},"nodeEntries":{}},{"id":"4a22ea96a2f847d0a6fe7a95c55568f9","edgeType":"Branch","source":"fa311d0758544f6a9671b6000b7099c1","target":"74f829c5fa7d40148d7362bbb7f8ec75","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n     var itemJson = JSON.parse(vaVars.itemJSON);\n    var qIndex = parseInt(vaVars.qIndex);\n    //qIndex is -1 initially, we reset this before search again step \n\n    do {\n        qIndex++;\n        var question = itemJson.variables[qIndex];\n    }\n    while(question &amp;&amp; (!question.visible || question.readonly || question.sys_readonly));\n\n    if (question) {\n        vaVars.qIndex = qIndex;\n        return true;\n    }\n    return false;\n})()"},"label":"Questions Left"}]}}}</graph><key_phrases/><library>true</library><live_agent>false</live_agent><name>Raj Request Catalog Item</name><nlu_intent/><nlu_intent_label/><nlu_model/><nlu_model_label/><nlu_provider/><roles/><source_topic_id>daddca37dbf620107f12e04a489619fb</source_topic_id><sys_class_name>sys_cb_topic</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2021-03-16 22:12:11</sys_created_on><sys_domain>global</sys_domain><sys_id>2c4ec2b3dbf620107f12e04a489619ce</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Raj Request Catalog Item</sys_name><sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package><sys_policy/><sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope><sys_update_name>sys_cb_topic_2c4ec2b3dbf620107f12e04a489619ce</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2021-03-16 22:12:11</sys_updated_on><type>TOPIC_BLOCK</type><variables/></sys_cb_topic><sys_variable_value action="delete_multiple" query="document_key=2c4ec2b3dbf620107f12e04a489619ce"/></record_update>]]></payload>
        <payload_hash>-1391051326</payload_hash>
        <record_name>Raj Request Catalog Item</record_name>
        <reverted_from/>
        <source>148982bfdbb620107f12e04a48961962</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-03-16 22:12:12</sys_created_on>
        <sys_id>304ec277dbf620107f12e04a489619e5</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>1783d18b3ce0000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-03-16 22:12:12</sys_updated_on>
        <type>Topic</type>
        <update_guid>784ec277dbf620105a074d62790b8ae4</update_guid>
        <update_guid_history>784ec277dbf620105a074d62790b8ae4:-1391051326</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>rakesha</sys_created_by>
        <sys_created_on>2021-03-16 22:14:32</sys_created_on>
        <sys_db_object display_value="" name="sys_cb_topic">sys_cb_topic</sys_db_object>
        <sys_id>556983dc2fb14324a36e70df802689e4</sys_id>
        <sys_metadata>2c4ec2b3dbf620107f12e04a489619ce</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Raj Request Catalog Item</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_scope_delete display_value="">94872a8897db403e8ee69a431de2fca4</sys_scope_delete>
        <sys_update_name>sys_cb_topic_2c4ec2b3dbf620107f12e04a489619ce</sys_update_name>
        <sys_update_version display_value="sys_cb_topic_2c4ec2b3dbf620107f12e04a489619ce">304ec277dbf620107f12e04a489619e5</sys_update_version>
        <sys_updated_by>rakesha</sys_updated_by>
        <sys_updated_on>2021-03-16 22:14:32</sys_updated_on>
    </sys_metadata_delete>
</record_update>
